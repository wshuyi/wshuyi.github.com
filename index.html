<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta property="og:type" content="website">
<meta property="og:title" content="玉树芝兰">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="玉树芝兰">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="玉树芝兰">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>玉树芝兰</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">玉树芝兰</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/30/如何应对MOOC辍学率高的问题？/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王树义">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oejqwrqkh.bkt.clouddn.com/temp_atom-c5fd7e52.JPG.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉树芝兰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/30/如何应对MOOC辍学率高的问题？/" itemprop="url">如何应对MOOC辍学率高的问题？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-30T21:30:11+08:00">
                2017-08-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-8d10671460716b3b.png" alt=""></p>
<p>师弟最近不知在搞什么研究，对MOOC感兴趣。昨天突然问我，MOOC中途辍学率高，那么如何才能提高课程完成率呢？</p>
<p>我觉得这是一个非常好的问题。一两句话回答有些轻率，于是写了这篇短文来回复。</p>
<p>因为MOOC学习跟许多人都有关，所以我把此文发布出来，希望能够引发更多人的思考。</p>
<p>以下是我答复的正文：</p>
<p>关于MOOC“辍学率高”这个事儿，我是这么看的——比较方法有问题。</p>
<p>咱们不能拿汽车的问题和马车的问题比。你在大学里选了一门课，基本上就没有选择了，必须得学完，否则拿不到学分，而且甚至可能留下不良记录。学的时候，你一直很快乐吗？不一定吧。你看上课的时候，学生们有睡觉的、玩儿游戏的、聊天儿的……只不过，因为考勤，学生必须得来；因为不愿意引起众怒，老师得控制考试难度，让大部分人通过。这样的没有选择才有了大学线下课程的“完成率高”。</p>
<p>这就如同你在食堂买了一份炒菜，不好吃也得将就着，因为你已经交了钱（沉没成本高，虽然理性人应该不在乎），还不能退（制度约束），况且这里别的菜味道可能更糟糕（选项约束）。</p>
<p>但是MOOC不同，它如同自助餐。你一开始选课，也许就没打算学到头儿。就如同拿着盘子每道菜盛取一些尝尝，如果觉得好，才会多尝些。而且因为选择实在太多，因此即便是好吃的东西，能多吃上三五口也就不错了，否则机会成本太高。</p>
<p>跟自助餐不同，你学MOOC支出的主要不是现金，而是注意力。而现代最稀缺的资源，恰恰就是注意力。</p>
<p>其实，我们买书的时候，不也是这种境况吗？有的书，买回来就没有读过；有的读了几页，偶有所得，就觉得值回票价了。为什么对于MOOC就要求必须从头学到尾呢？</p>
<p>要是一定要提升完成率，以下几个方面仅供参考。</p>
<ol>
<li>提升课程独特性。市场上没有别人能提供这个课程，你垄断。只要需求足够大，你讲得怎么样也就无所谓了；（例如2011年的Machine Learning和2016年的Agent-based Modeling in Netlogo。不过，这两门课讲得都很好哦。)</li>
<li>课程证书含金量。即便大家都提供的课程，但是你的课程难度足够大，如果能够通过，在找工作的时候具有真正的优势。这时候你不必顾及难度，学习者会有足够的激励。（例如Jeff Hinton的Neural Networks，反正我学起来的时候真是痛苦，后悔大学线性代数和微积分没好好学。知识掌握了最重要，那些八九十分都是浮云)</li>
<li>课程交互性与趣味性强。提供足够的吸引力，让别人一上手就欲罢不能。这需要课程设计的独具匠心。（例如Interactive Programming in Python，教你设计游戏，那种成就感和趣味引人入胜，让人恨不得一天学完。我班上的一个小姑娘真的是一天学完的。）</li>
<li>缩短课程时间。课程足够紧凑，变传统的学期课程为若干模块，每个模块总时长3-4小时，且切分成子模块。让学习者不必瞻前顾后，对比其他同类课程，而且切实感受到进度的突飞猛进。学完一个模块之后能有实质性收获，就会对后面的模块产生兴趣。（Datacamp的课程大多使用这种设计模式，我觉得效果不错，认知负荷比较小。）</li>
</ol>
<p>因为我本人并没有开设过MOOC，只是学习并且获得过数十门MOOC证书而已。所以这些看法，只能算是学习者的一些体会。肤浅之见，贻笑大方。仅供参考。</p>
<p>希望抛砖引玉，能有更多MOOC教学实践者一起参与讨论，我们一起分享经验，交流心得。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/29/如何用Python和R对《权力的游戏》故事情节做情绪分析？/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王树义">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oejqwrqkh.bkt.clouddn.com/temp_atom-c5fd7e52.JPG.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉树芝兰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/29/如何用Python和R对《权力的游戏》故事情节做情绪分析？/" itemprop="url">如何用Python和R对《权力的游戏》故事情节做情绪分析？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-29T21:19:35+08:00">
                2017-08-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>想知道一部没看过的影视剧能否符合自己口味，却又怕被剧透？没关系，我们可以用情绪分析来了解故事情节是否足够跌宕起伏。本文一步步教你如何用Python和R轻松愉快完成文本情绪分析。一起来试试吧。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-aefdc68715bafcbd.png" alt=""></p>
<h1 id="烦恼"><a href="#烦恼" class="headerlink" title="烦恼"></a>烦恼</h1><p>追剧是个令人苦恼的事情。</p>
<p>就拿刚刚播完第7季的《权力的游戏》来说，每周等的时候那叫一个煎熬，就盼着周一能提早到来。</p>
<p>可是最后一集播完，你紧张、兴奋、激动和过瘾之后呢？是不是又觉得很失落？</p>
<p>因为——下面我该看什么剧啊？</p>
<p>现在的影视作品，不是太少，而是太多。如果你有选择困难症，更会有生不逢时的感觉。</p>
<p>Netflix, Amazon和豆瓣等推荐引擎可以给你推荐影视作品。但是它们的推荐，只是把观众划分成了许多个圈子。你的数据，如果足够真实准确的话，可能刚好和某一个圈子的特性比较接近，于是就给你推荐这个圈子更喜欢的作品。</p>
<p>但是这不一定靠谱。有可能你的观影和评价信息分散在不同的平台上。不完整、不准确的观影数据，会导致推荐的效果大打折扣。</p>
<p>即便有了推荐的影视剧，它是否符合你的口味呢？毕竟看剧也是有机会成本的。放着《绝命毒师》不看，去看了一部烂剧，你的生命中的数十小时就这样被浪费了。</p>
<p>可除了从头到尾看一遍，又如何能验证一部剧是否是自己喜欢的呢？</p>
<p>你可能想到去评论区看剧评。那可是个危险区域，因为随时都有被剧透的风险。</p>
<p>你觉得还是利用社交媒体吧，在万能的朋友圈问问好友。有的好友确实很热心，但有的时候，也许会过于热心。</p>
<p>例如下面这位（图片来自于网络）：</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-184d2cf7d5ac8004.jpg" alt=""></p>
<p>你可能抓狂了，觉得这是个不可能完成的任务，就如同英谚所云：</p>
<blockquote>
<p>You can’t have your cake and eat it too.<br>真的是这样吗？不一定。在这个大数据泛滥，数据分析工具并不稀缺的时代，你完全可以利用技术帮自己选择优秀的影视作品。</p>
</blockquote>
<p>故事情节的文本，你可以到互联网上找剧本，或者是字幕。当然，不是让你把剧本从头读到尾，那样还不如直接看剧呢。你需要用技术来对文本进行分析。</p>
<h1 id="情绪"><a href="#情绪" class="headerlink" title="情绪"></a>情绪</h1><p>我们提到的这个技术，叫做情绪分析(emotional analysis)。它和情感分析(sentiment analysis)有相似之处。都是通过对内容的自动化分析，来获得结果。</p>
<p>情感分析的结果一般分为正向(positive)和负向(negative)，而情绪分析包含的种类就比较多了。</p>
<p>加拿大国家研究委员会(National Research Council of Canada)官方发布的情绪词典包含了8种情绪，分别为：</p>
<ol>
<li>愤怒(anger)</li>
<li>期待(anticipation)</li>
<li>厌恶(disgust)</li>
<li>恐惧(fear)</li>
<li>喜悦(joy)</li>
<li>悲伤(sadness)</li>
<li>惊讶(surprise)</li>
<li>信任(trust)</li>
</ol>
<p>有了这些情绪的标记，你可以轻松地对一段文本的情绪变化进行分析。</p>
<p>这时候，你可以回忆起中学语文老师讲作文时说过的那句话：</p>
<blockquote>
<p>文如看山不喜平。<br>故事情节会伴随着各种情绪的波动。通过分析这些情绪的起伏，我们可以看出故事的基调是否符合自己的口味，情节是否紧凑等。这样，你可以根据自己的偏好，甚至是当前的心境，来选择合适的作品观看了。</p>
</blockquote>
<p>我们需要用到Python和R。这两种语言在目前数据科学领域里最受欢迎。Python的优势在于通用，而R的优势在于统计学家组成的社区。这些统计学家真是高产，也很酷，经常制造出令人惊艳的分析包。</p>
<p>咱们这里就用Python来做数据清理，然后用R做情绪分析，并且把结果可视化输出。</p>
<h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><h1 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h1><p>我们首先需要找到的是来源数据。作为例子，我们选择了《权利的游戏》第三季的第9集，名字叫做”The Rains of Castamere”。</p>
<p>你可以到<a href="https://genius.com/Game-of-thrones-the-rains-of-castamere-annotated" target="_blank" rel="external">这个网址</a>下载这一集的剧本。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-a131f6a1e462904f.jpg" alt=""></p>
<p>你只需要全选页面拷贝，然后打开一个文本编辑器，把内容粘贴进去。好了，现在你就有可供分析的文本了。</p>
<p>请建立一个工作目录。后面的操作都在这个目录里进行。例如我的工作目录是<code>~/Downloads/python-r-emotion</code>。</p>
<p>把刚刚获得的文本文件放到这个目录中。</p>
<h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><p>我们需要用到Jupyter Notebook，请安装Anaconda套装。具体的安装方法请参考《 <a href="http://www.jianshu.com/p/e4b24a734ccc" target="_blank" rel="external">如何用Python做词云</a> 》一文。</p>
<h1 id="R"><a href="#R" class="headerlink" title="R"></a>R</h1><p>到<a href="https://cran.r-project.org/mirrors.html" target="_blank" rel="external">这个网址</a>下载R基础安装包。你会看到R的下载位置有很多。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-f6a6a08aa47fbd4c.jpg" alt=""></p>
<p>我建议你选择中国的镜像，这样连接速度更快。清华大学的<a href="https://mirrors.tuna.tsinghua.edu.cn/CRAN/" target="_blank" rel="external">镜像</a>就不错。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-53a6d08cde8fc07f.jpg" alt=""></p>
<p>请根据你的操作系统平台选择其中对应的版本下载。我选择的是macOS版本，下载得到pkg文件。双击就可以安装。</p>
<p>安装了基础包之后，我们继续安装集成开发环境RStudio。下载地址为<a href="https://www.rstudio.com/products/rstudio/download/#download" target="_blank" rel="external">这里</a>。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-95d69561318ab1d6.jpg" alt=""></p>
<p>还是依据你的操作系统情况，选择对应的安装包。macOS安装包为dmg文件。双击打开后，把其中的RStudio.app图标拖动到Applications文件夹中，安装就完成了。</p>
<p>好了，现在你就有了R的运行环境了。</p>
<h1 id="清理"><a href="#清理" class="headerlink" title="清理"></a>清理</h1><p>我们首先需要清理文本数据，完成以下这两个任务：</p>
<ol>
<li>把与剧情正文无关的内容去除；</li>
<li>将数据转换成R可以直接做情绪分析的结构化数据格式。</li>
</ol>
<p>到你的系统“终端”(macOS, Linux)或者“命令提示符”(Windows)下，进入我们的工作目录，执行以下命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">jupyter notebook</div></pre></td></tr></table></figure>
<p>这时候工作目录下还只有那个文本文件。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-5de8084fb38f86ec.jpg" alt=""></p>
<p>我们打开看看内容。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-ce573d91b36c3dcf.jpg" alt=""></p>
<p>往下翻页，我们找到了剧本正文正式开始的标记<code>Opening Credits</code>。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-ff0c13359596866b.jpg" alt=""></p>
<p>翻到文本的结尾，我们可以看到剧本结束的标记<code>End Credits</code>。</p>
<p>我们回到主页面下，新建一个Python的Notebook。点击右方的New按钮，选择Python 2。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-31d2b5493258231c.jpg" alt=""></p>
<p>有了全新的Notebook后，我们首先引入需要用到的包。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> re</div></pre></td></tr></table></figure>
<p>然后读取当前目录下的文本文件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">with</span> open(<span class="string">"s03e09.txt"</span>) <span class="keyword">as</span> f:</div><div class="line">    data = f.read()</div></pre></td></tr></table></figure>
<p>看看内容：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(data)</div></pre></td></tr></table></figure>
<p>结果如下：</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-c27b8e23ff5211eb.jpg" alt=""></p>
<p>数据正确读入。下面我们依照刚才浏览中发现的标记把正文以外的文本内容去掉。</p>
<p>先去掉开头的非剧本正文内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data = data.split(<span class="string">'Opening Credits]'</span>)[<span class="number">1</span>]</div></pre></td></tr></table></figure>
<p>再次打印，可以看见现在从正文开头了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(data)</div></pre></td></tr></table></figure>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-657035240c95f2bd.jpg" alt=""></p>
<p>下面我们同样处理结尾部分。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data = data.split(<span class="string">'[End Credits'</span>)[<span class="number">0</span>]</div></pre></td></tr></table></figure>
<p>打印出来试试看。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(data)</div></pre></td></tr></table></figure>
<p>拖动到尾部。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-9a9336d0e3df46d9.jpg" alt=""></p>
<p>移除了开头和结尾的多余内容后，我们来移除空行。这里我们需要用到正则表达式。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">regex = <span class="string">r"^$\n"</span></div><div class="line">subst = <span class="string">""</span></div><div class="line">data = re.sub(regex, subst, data, <span class="number">0</span>, re.MULTILINE)</div></pre></td></tr></table></figure>
<p>然后我们再次打印。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">print(data)</div></pre></td></tr></table></figure>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-066f4d6e695c6a44.jpg" alt=""></p>
<p>空行都已经成功挪走了。可是我们注意到还有一些分割线组成的行，也需要去除掉。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">regex = <span class="string">r"^-+$\n"</span></div><div class="line">subst = <span class="string">""</span></div><div class="line">data = re.sub(regex, subst, data, <span class="number">0</span>, re.MULTILINE)</div></pre></td></tr></table></figure>
<p>至此，清理工作已经完成了。下面我们把文本整理成数据框，每一行分别加上行号。</p>
<p>利用换行符把原本完整的文本分割成行。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lines = data.split(<span class="string">'\n'</span>)</div></pre></td></tr></table></figure>
<p>然后给每一行加上行号。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">myrows = []</div><div class="line">num = <span class="number">1</span></div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> lines:</div><div class="line">    myrows.append([num, line])</div><div class="line">    num = num + <span class="number">1</span></div></pre></td></tr></table></figure>
<p>我们看看前三行的行号是否已经正常添加。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">myrows[:<span class="number">3</span>]</div></pre></td></tr></table></figure>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-860766a5032a8880.jpg" alt=""></p>
<p>一切正常，下面我们把目前的数组转换成数据框。如果你对数据框的概念不太熟悉，请参考《<a href="http://www.jianshu.com/p/67a71e366516" target="_blank" rel="external">贷还是不贷：如何用Python和机器学习帮你决策？</a>》一文。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df = pd.DataFrame(myrows)</div></pre></td></tr></table></figure>
<p>我们来看看执行结果：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df.head()</div></pre></td></tr></table></figure>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-5bdf9eda9ce352c1.jpg" alt=""></p>
<p>数据是正确的，不过表头不对。我们给表头重新命名。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df.columns = [<span class="string">'line'</span>, <span class="string">'text'</span>]</div></pre></td></tr></table></figure>
<p>再来看看：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df.head()</div></pre></td></tr></table></figure>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-8004866c7ded92e9.jpg" alt=""></p>
<p>好了，既然数据框已经做好了。下面我们把它转换成为csv格式，以便于R来读取和处理。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df.to_csv(<span class="string">'data.csv'</span>, index=<span class="keyword">False</span>)</div></pre></td></tr></table></figure>
<p>我们打开data.csv文件，可以看到数据如下：</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-71addb657d4cd0a2.jpg" alt=""></p>
<p>数据清理和准备工作结束，下面我们用R进行分析。</p>
<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>RStudio可以提供一个交互环境，帮我们执行R命令并即时反馈结果。</p>
<p>打开RStudio之后，选择File-&gt;New，然后从以下界面中选择 R Notebook。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-bd2894a2bc092653.jpg" alt=""></p>
<p>然后，我们就有了一个R Notebook的模板。模板附带一些基础使用说明。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-f1349bef9c014a56.jpg" alt=""></p>
<p>我们尝试点击编辑区域（左侧）代码部分（灰色）的运行按钮。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-a32ce445bcfffb7c.jpg" alt=""></p>
<p>立即就可以看到绘图的结果了。</p>
<p>另外我们还可以点击菜单栏上的Preview按钮，来看整个儿代码的运行结果。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-741e088ef93655cd.jpg" alt=""></p>
<p>RStudio为我们生成了HTML文件，我们的文字说明、代码和运行结果图文并茂呈现出来。</p>
<p>好了，熟悉了环境后，我们该实际操作运行自己的代码了。咱们把左侧编辑区的开头说明区保留，把全部正文删除，并且把文件名改成有意义的名字，例如<code>emotional-analysis</code>。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-f9b5bfe7176065f1.jpg" alt=""></p>
<p>这样就清爽多了。</p>
<p>下面我们读入数据。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">setwd(<span class="string">"~/Downloads/python-r-emotion/"</span>)</div><div class="line">script &lt;- read.csv(<span class="string">"data.csv"</span>, stringsAsFactors=<span class="literal">FALSE</span>)</div></pre></td></tr></table></figure>
<p>读入的时候一定要注意设置<code>stringsAsFactors=FALSE</code>，不然R在读取字符串数据的时候，会默认转换为level，后面的分析就做不成了。读取之后，在右侧的数据区域你可以看到script这个变量，双击它，可以看到内容。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-d04f584a4d6e951c.jpg" alt=""></p>
<p>数据有了，下面我们需要准备分析用的包。这里我们需要用到4个包，请执行以下语句安装。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">install.packages(<span class="string">"dplyr"</span>)</div><div class="line">install.packages(<span class="string">"tidytext"</span>)</div><div class="line">install.packages(<span class="string">"tidyr"</span>)</div><div class="line">install.packages(<span class="string">"ggplot2"</span>)</div></pre></td></tr></table></figure>
<p>注意安装新软件包这种操作只需要执行一次。可是我们每次预览结果的时候，文件里所有语句都会被执行一遍。为了避免安装命令被反复执行。当安装结束后，请你删除或者注释掉上面几条语句。</p>
<p>安装了包，并不意味着就可以直接用其中的函数了。使用之前，你需要执行library语句调用这些包。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(dplyr)</div><div class="line"><span class="keyword">library</span>(tidytext)</div><div class="line"><span class="keyword">library</span>(tidyr)</div><div class="line"><span class="keyword">library</span>(ggplot2)</div></pre></td></tr></table></figure>
<p>好了，万事俱备。我们需要把一句句的文本拆成单词，这样才能和情绪词典里的单词做匹配，从而分析单词的情绪属性。</p>
<p>在R里面，可以采用Tidy Text方式来做。执行的语句是<code>unnest_token</code>，我们把原先的句子拆分成为单词。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">tidy_script &lt;- script %&gt;%</div><div class="line">  unnest_tokens(word, text)</div><div class="line">head(tidy_script)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">##     line     word</div><div class="line">## 1      1    first</div><div class="line">## 1.1    1    scene</div><div class="line">## 1.2    1    shows</div><div class="line">## 1.3    1      the</div><div class="line">## 1.4    1 location</div><div class="line">## 1.5    1       of</div></pre></td></tr></table></figure>
<p>这里原先的行号依然被保留。我们可以看到每一个词来自于哪一行，这有利于下面我们对行甚至段落单位进行分析。</p>
<p>我们调用加拿大国家研究委员会发布的情绪词典。这个词典在tidytext包里面内置了，就叫做<code>nrc</code>。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tidy_script %&gt;%</div><div class="line">  inner_join(get_sentiments(<span class="string">"nrc"</span>)) %&gt;%</div><div class="line">  arrange(line) %&gt;%</div><div class="line">  head(<span class="number">10</span>)</div></pre></td></tr></table></figure>
<p>我们只显示前10行的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">## Joining, by = &quot;word&quot;</div><div class="line"></div><div class="line">##    line         word    sentiment</div><div class="line">## 1     1         rock     positive</div><div class="line">## 2     1    ancestral        trust</div><div class="line">## 3     1        giant         fear</div><div class="line">## 4     1 representing anticipation</div><div class="line">## 5     1        stark     negative</div><div class="line">## 6     1        stark        trust</div><div class="line">## 7     1        stark     negative</div><div class="line">## 8     1        stark        trust</div><div class="line">## 9     4    dangerous         fear</div><div class="line">## 10    4    dangerous     negative</div></pre></td></tr></table></figure>
<p>可以看到，有的词对应某一种情绪属性，有的词同时对应多种情绪属性。注意nrc包里面不仅有情绪，而且还有情感（正向和负向）。</p>
<p>我们对单词的情绪已经清楚了。下面我们来综合判断每一行的不同情感分别含有几个词。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">tidy_script %&gt;%</div><div class="line">  inner_join(get_sentiments(<span class="string">"nrc"</span>)) %&gt;%</div><div class="line">  count(line, sentiment) %&gt;%</div><div class="line">  arrange(line) %&gt;%</div><div class="line">  head(<span class="number">10</span>)</div></pre></td></tr></table></figure>
<p>还是只显示结果的前10行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">## Joining, by = &quot;word&quot;</div><div class="line"></div><div class="line">## # A tibble: 10 x 3</div><div class="line">##     line    sentiment     n</div><div class="line">##    &lt;int&gt;        &lt;chr&gt; &lt;int&gt;</div><div class="line">##  1     1 anticipation     1</div><div class="line">##  2     1         fear     1</div><div class="line">##  3     1     negative     2</div><div class="line">##  4     1     positive     1</div><div class="line">##  5     1        trust     3</div><div class="line">##  6     4         fear     1</div><div class="line">##  7     4     negative     1</div><div class="line">##  8     5     positive     1</div><div class="line">##  9     5        trust     1</div><div class="line">## 10     6     positive     1</div></pre></td></tr></table></figure>
<p>以第1行为例，包含“期待”的词有1个，包含“恐惧”的有1个，包含“信任”的有3个。</p>
<p>如果我们以1行为单位分析情感变化，粒度过细。鉴于整个剧本包含了几百行文字，我们以5行作为一个基础单位，来进行分析。</p>
<p>这里我们使用<code>index</code>来把原先的行号处理一下，分成段落。<code>%/%</code>代表整除符号，这样0-4行就成为了第一段落，5-9行成为第二段落，以此类推。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">tidy_script %&gt;%</div><div class="line">  inner_join(get_sentiments(<span class="string">"nrc"</span>)) %&gt;%</div><div class="line">  count(line, sentiment) %&gt;%</div><div class="line">  mutate(index = line %/% <span class="number">5</span>) %&gt;%</div><div class="line">  arrange(index) %&gt;%</div><div class="line">  head(<span class="number">10</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">## Joining, by = &quot;word&quot;</div><div class="line"></div><div class="line">## # A tibble: 10 x 4</div><div class="line">##     line    sentiment     n index</div><div class="line">##    &lt;int&gt;        &lt;chr&gt; &lt;int&gt; &lt;dbl&gt;</div><div class="line">##  1     1 anticipation     1     0</div><div class="line">##  2     1         fear     1     0</div><div class="line">##  3     1     negative     2     0</div><div class="line">##  4     1     positive     1     0</div><div class="line">##  5     1        trust     3     0</div><div class="line">##  6     4         fear     1     0</div><div class="line">##  7     4     negative     1     0</div><div class="line">##  8     5     positive     1     1</div><div class="line">##  9     5        trust     1     1</div><div class="line">## 10     6     positive     1     1</div></pre></td></tr></table></figure>
<p>可以看出，第一段包含的情感还真是很丰富。</p>
<p>只是如果让我们把结果表格从头读到尾，那也真够难受的。我们还是用可视化的方法，把图绘制出来吧。</p>
<p>绘图我们采用ggplot包。这个包我们在《 <a href="http://www.jianshu.com/p/4ea083874df4" target="_blank" rel="external">如何用Python做舆情时间序列可视化？</a><br>》一文中介绍过，欢迎查阅复习。</p>
<p>我们使用<code>geom_col</code>指令，让R帮我们绘制柱状图。对不同的情绪，我们用不同颜色表示出来。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">tidy_script %&gt;%</div><div class="line">  inner_join(get_sentiments(<span class="string">"nrc"</span>)) %&gt;%</div><div class="line">  count(line, sentiment) %&gt;%</div><div class="line">  mutate(index = line %/% <span class="number">5</span>) %&gt;%</div><div class="line">  ggplot(aes(x=index, y=n, color=sentiment)) %&gt;%</div><div class="line">  + geom_col()</div></pre></td></tr></table></figure>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-a21e0745b1bdf92d.png" alt=""></p>
<p>结果是丰富多彩的，可惜看不大清楚。为了区别不同情绪，我们调用<code>facet_wrap</code>函数，把不同情绪拆开，分别绘制。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">tidy_script %&gt;%</div><div class="line">  inner_join(get_sentiments(<span class="string">"nrc"</span>)) %&gt;%</div><div class="line">  count(line, sentiment) %&gt;%</div><div class="line">  mutate(index = line %/% <span class="number">5</span>) %&gt;%</div><div class="line">  ggplot(aes(x=index, y=n, color=sentiment)) %&gt;%</div><div class="line">  + geom_col() %&gt;%</div><div class="line">  + facet_wrap(~sentiment, ncol=<span class="number">3</span>)</div></pre></td></tr></table></figure>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-330953b2a8f756d4.png" alt=""></p>
<p>嗯，这张图看着就舒服多了。</p>
<p>不过这张图也会给我们造成一些疑惑。按照道理来说，每一段落的内容里，包含单词数量大致相当。结尾部分情感分析结果里面，正向和负向几乎同时上升，这就让人很不解。是这里的几行太长了，还是出了什么其他的问题呢？</p>
<p>数据分析的关键，就是在这种令人疑惑的地方深挖进去。</p>
<p>我们不妨来看看，出现最多的正向和负向情感词都有哪些。</p>
<p>先来看看正向的。我们这次不是按照行号，而是按照词频来排序。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">tidy_script %&gt;%</div><div class="line">  inner_join(get_sentiments(<span class="string">"nrc"</span>)) %&gt;%</div><div class="line">  filter(sentiment == <span class="string">"positive"</span>) %&gt;%</div><div class="line">  count(word) %&gt;%</div><div class="line">  arrange(desc(n)) %&gt;%</div><div class="line">  head(<span class="number">10</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">## Joining, by = &quot;word&quot;</div><div class="line"></div><div class="line">## # A tibble: 10 x 2</div><div class="line">##        word     n</div><div class="line">##       &lt;chr&gt; &lt;int&gt;</div><div class="line">##  1     lord    13</div><div class="line">##  2     good     9</div><div class="line">##  3    guard     9</div><div class="line">##  4 daughter     8</div><div class="line">##  5 shoulder     7</div><div class="line">##  6     love     6</div><div class="line">##  7     main     6</div><div class="line">##  8    quiet     6</div><div class="line">##  9    bride     5</div><div class="line">## 10     king     5</div></pre></td></tr></table></figure>
<p>看到这个词频，我们不禁有些失落——看来分析结果是有问题的。许多词汇都是名词，而且在《权力的游戏》故事中，这些词根本就没有明确的情感指向。例如lord这个词，剧中的lord有的正直善良，但也有很多不是什么好人；king也一样，虽然Robb和Jon是国王，但别忘了Joffrey也是国王啊。</p>
<p>我们再来看看负向情感词汇吧。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">tidy_script %&gt;%</div><div class="line">  inner_join(get_sentiments(<span class="string">"nrc"</span>)) %&gt;%</div><div class="line">  filter(sentiment == <span class="string">"negative"</span>) %&gt;%</div><div class="line">  count(word) %&gt;%</div><div class="line">  arrange(desc(n)) %&gt;%</div><div class="line">  head(<span class="number">10</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">## Joining, by = &quot;word&quot;</div><div class="line"></div><div class="line">## # A tibble: 10 x 2</div><div class="line">##       word     n</div><div class="line">##      &lt;chr&gt; &lt;int&gt;</div><div class="line">##  1   stark    16</div><div class="line">##  2     pig    14</div><div class="line">##  3    lord    13</div><div class="line">##  4    worm    12</div><div class="line">##  5    kill    11</div><div class="line">##  6   black     9</div><div class="line">##  7  dagger     8</div><div class="line">##  8    shot     8</div><div class="line">##  9 killing     7</div><div class="line">## 10  afraid     4</div></pre></td></tr></table></figure>
<p>看了这个结果，就更令人沮丧不已了——同样的一个lord，竟然既被当成了正向，又被当成了负向词汇。词典标注者太不负责任了吧！</p>
<p>别着急。出现这样的情况，是因为我们做分析时少了一个重要步骤——处理停用词。对于每一个具体场景，我们都需要使用停用词表，把那些可能干扰分析结果的词扔出去。</p>
<p>tidytext提供了默认的停用词表。我们先拿来试试看。这里使用的语句是<code>anti_join</code>，就可以把停用词先去除，再进行情绪词表连接。</p>
<p>我们看看停用词去除后，正向情感词汇的高频词有没有变化。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">tidy_script %&gt;%</div><div class="line">  anti_join(stop_words) %&gt;%</div><div class="line">  inner_join(get_sentiments(<span class="string">"nrc"</span>)) %&gt;%</div><div class="line">  filter(sentiment == <span class="string">"positive"</span>) %&gt;%</div><div class="line">  count(word) %&gt;%</div><div class="line">  arrange(desc(n)) %&gt;%</div><div class="line">  head(<span class="number">10</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">## Joining, by = &quot;word&quot;</div><div class="line">## Joining, by = &quot;word&quot;</div><div class="line"></div><div class="line">## # A tibble: 10 x 2</div><div class="line">##        word     n</div><div class="line">##       &lt;chr&gt; &lt;int&gt;</div><div class="line">##  1     lord    13</div><div class="line">##  2    guard     9</div><div class="line">##  3 daughter     8</div><div class="line">##  4 shoulder     7</div><div class="line">##  5     love     6</div><div class="line">##  6     main     6</div><div class="line">##  7    quiet     6</div><div class="line">##  8    bride     5</div><div class="line">##  9     king     5</div><div class="line">## 10    music     5</div></pre></td></tr></table></figure>
<p>结果令人失望。看来停用词表里没有包含我们需要去除的那一堆名词。</p>
<p>没关系，我们自己来修订停用词表。使用R中的<code>bind_rows</code>语句，我们就能在基础的预置停用词表基础上，附加上我们自己的停用词。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">custom_stop_words &lt;- bind_rows(stop_words,</div><div class="line">                               data_frame(word = c(<span class="string">"stark"</span>, <span class="string">"mother"</span>, <span class="string">"father"</span>, <span class="string">"daughter"</span>, <span class="string">"brother"</span>, <span class="string">"rock"</span>, <span class="string">"ground"</span>, <span class="string">"lord"</span>, <span class="string">"guard"</span>, <span class="string">"shoulder"</span>, <span class="string">"king"</span>, <span class="string">"main"</span>, <span class="string">"grace"</span>, <span class="string">"gate"</span>, <span class="string">"horse"</span>, <span class="string">"eagle"</span>, <span class="string">"servent"</span>),</div><div class="line">                                          lexicon = c(<span class="string">"custom"</span>)))</div></pre></td></tr></table></figure>
<p>我们加入了一堆名词和关系代词。因为它们和情绪之间没有必然的关联。但是名词还是保留了一些。例如“新娘”总该是和好的情感和情绪相连吧。</p>
<p>用了定制的停用词表后，我们来看看词频的变化。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">tidy_script %&gt;%</div><div class="line">  anti_join(custom_stop_words) %&gt;%</div><div class="line">  inner_join(get_sentiments(<span class="string">"nrc"</span>)) %&gt;%</div><div class="line">  filter(sentiment == <span class="string">"positive"</span>) %&gt;%</div><div class="line">  count(word) %&gt;%</div><div class="line">  arrange(desc(n)) %&gt;%</div><div class="line">  head(<span class="number">10</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">## Joining, by = &quot;word&quot;</div><div class="line">## Joining, by = &quot;word&quot;</div><div class="line"></div><div class="line">## # A tibble: 10 x 2</div><div class="line">##           word     n</div><div class="line">##          &lt;chr&gt; &lt;int&gt;</div><div class="line">##  1        love     6</div><div class="line">##  2       quiet     6</div><div class="line">##  3       bride     5</div><div class="line">##  4       music     5</div><div class="line">##  5        rest     5</div><div class="line">##  6     finally     4</div><div class="line">##  7        food     3</div><div class="line">##  8     forward     3</div><div class="line">##  9        hope     3</div><div class="line">## 10 hospitality     3</div></pre></td></tr></table></figure>
<p>这次好多了，起码解释情绪可以自圆其说了。我们再看看那些负向情感词汇。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">tidy_script %&gt;%</div><div class="line">  anti_join(custom_stop_words) %&gt;%</div><div class="line">  inner_join(get_sentiments(<span class="string">"nrc"</span>)) %&gt;%</div><div class="line">  filter(sentiment == <span class="string">"negative"</span>) %&gt;%</div><div class="line">  count(word) %&gt;%</div><div class="line">  arrange(desc(n)) %&gt;%</div><div class="line">  head(<span class="number">10</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">## Joining, by = &quot;word&quot;</div><div class="line">## Joining, by = &quot;word&quot;</div><div class="line"></div><div class="line">## # A tibble: 10 x 2</div><div class="line">##       word     n</div><div class="line">##      &lt;chr&gt; &lt;int&gt;</div><div class="line">##  1     pig    14</div><div class="line">##  2    worm    12</div><div class="line">##  3    kill    11</div><div class="line">##  4   black     9</div><div class="line">##  5  dagger     8</div><div class="line">##  6    shot     8</div><div class="line">##  7 killing     7</div><div class="line">##  8  afraid     4</div><div class="line">##  9    fear     4</div><div class="line">## 10   leave     4</div></pre></td></tr></table></figure>
<p>比起之前，也有很大进步。</p>
<p>做好了基础的修订工作，下面我们来重新作图吧。我们把停用词表加进去，并且还用<code>filter</code>语句把情感属性删除掉了。因为我们分析的对象是情绪(emotion)，而不是情感(sentiment)。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">tidy_script %&gt;%</div><div class="line">  anti_join(custom_stop_words) %&gt;%</div><div class="line">  inner_join(get_sentiments(<span class="string">"nrc"</span>)) %&gt;%</div><div class="line">  filter(sentiment != <span class="string">"negative"</span> &amp; sentiment != <span class="string">"positive"</span>) %&gt;%</div><div class="line">  count(line, sentiment) %&gt;%</div><div class="line">  mutate(index = line %/% <span class="number">5</span>) %&gt;%</div><div class="line">  ggplot(aes(x=index, y=n, color=sentiment)) %&gt;%</div><div class="line">  + geom_col() %&gt;%</div><div class="line">  + facet_wrap(~sentiment, ncol=<span class="number">3</span>)</div></pre></td></tr></table></figure>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-bfcf9830a03a2095.png" alt=""></p>
<p>这幅图一下子变得清晰，也值得琢磨。</p>
<p>在这一集的结尾，多种情绪混杂交织——欢快的气氛陡然下降，期待与信任在波动，厌恶在不断上涨，恐惧与悲伤陡然上升，愤怒突破天际，交杂着数次的惊讶……</p>
<p>你可能会纳闷儿，情绪怎么可能这么复杂？是不是分析又出问题了？</p>
<p>还真不是，这一集的故事，有个另外的名字，叫做《红色婚礼》。</p>
<h1 id="收获"><a href="#收获" class="headerlink" title="收获"></a>收获</h1><p>通过本文的学习，希望你已初步掌握了如下技能：</p>
<ol>
<li>如何用Python对网络摘取的文本做处理，从中找出正文，并且去掉空行等内容；</li>
<li>如何用数据框对数据进行存储、表示与格式转换，在Python和R中交换数据；</li>
<li>如何安装和使用RStudio环境，用R Notebook做交互式编程；</li>
<li>如何利用tidytext方式来处理情感分析与情绪分析；</li>
<li>如何设置自己的停用词表；</li>
<li>如何用ggplot绘制多维度切面图形。</li>
</ol>
<p>掌握了这些内容后，你是否觉得用这么强大的工具分析个剧本找影视作品，有些大炮轰蚊子的感觉？</p>
<h1 id="讨论"><a href="#讨论" class="headerlink" title="讨论"></a>讨论</h1><p>除了本文介绍的方法之外，你还知道哪些方便的情绪分析工具与方法？在寻找新剧方面，你有什么独家心得体悟？有了情绪分析这个利器，你还可以处理哪些有趣的问题？欢迎留言，记录下你的思考，分享给大家。我们一起交流讨论。</p>
<p>如果你对我的文章感兴趣，欢迎点赞，并且关注我的简书文集《玉树芝兰》。</p>
<p>如果本文可能对你身边的亲友有帮助，也欢迎你把本文通过微博或朋友圈分享给他们。让他们一起参与到我们的讨论中来。</p>
<h1 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h1><ul>
<li><a href="http://www.jianshu.com/p/e4b24a734ccc" target="_blank" rel="external">如何用Python做词云？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/721190534061" target="_blank" rel="external">如何用Python做中文分词？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/d50a14541d01" target="_blank" rel="external">如何用Python做情感分析？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/4ea083874df4" target="_blank" rel="external">如何用Python做舆情时间序列可视化？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/67a71e366516" target="_blank" rel="external">贷还是不贷：如何用Python和机器学习帮你决策？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/fdde9fc03f94" target="_blank" rel="external">如何用Python从海量文本抽取主题？ - 简书</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/18/如何用Python做Web开发？——Django环境配置/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王树义">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oejqwrqkh.bkt.clouddn.com/temp_atom-c5fd7e52.JPG.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉树芝兰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/18/如何用Python做Web开发？——Django环境配置/" itemprop="url">如何用Python做Web开发？——Django环境配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-18T21:33:50+08:00">
                2017-08-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>用Python做Web开发，Django框架是个非常好的起点。如何从零开始，配置好Django开发环境呢？本文带你一步步无痛上手。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-1320c54ffd74a2a7.png" alt=""></p>
<h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p>最近有个词儿很流行，叫做“全栈”(full stack)。各大IT培训机构几乎都在宣传这一概念。告诉你只需要交1XXXX元，就可以在XX天之内把自己变成一个“全栈工程师”。有了这个称号可不得了，收入马上可以上升若干个量级，从此走向通往人生巅峰的坦途……</p>
<p>醒醒，没那好事儿。</p>
<p>静下心来琢磨一下，XX天之内就可以学会的东西，门槛高吗？这么多人都能学会的东西，还有竞争优势吗？</p>
<p>所谓“全栈”，无非是同时掌握Web开发中的前端和后端开发技术而已。正是因为开发工具越来越好用，技术门槛越来越低，所以从前必须分工才能完成的工作，现在个人就能独立完成。</p>
<p>这种事儿不稀奇。从前作家写稿子都用打字机甚至手写，排版这些事儿都得有专业人士来完成。可如今呢？你写个公众号，从起草到发布一个人就可以搞定。如果你搞不定，欢迎往前翻翻，看我介绍Markdown的那几篇文章。</p>
<p>但是门槛低也是好事儿。这意味着你也可以很容易掌握Web开发技术。虽然这不能保证你百万年薪，但是可以让你掌握更丰富的工具，使得你可以拥有更多的可能性。</p>
<p>篇幅有限，本文只说后端的事儿。</p>
<p>所谓后端，就是服务器端。前端呢？就是用户的浏览器了。浏览器运行在普通的个人电脑上，能干的事情相对有限。大规模的计算如果都需要在浏览器中完成，那么效率必然很低。而且，用户信息存储这样的工作，也需要放到服务器加密集中管理，才能保证安全。</p>
<p>后端开发说白了，就是架设一个服务应用。用户通过浏览器访问你的这个服务，你根据用户提供的输入进行处理，然后把输出的结果反馈给用户的浏览器。</p>
<p>听起来很简单，对吧？没错，这就是标准的冯诺依曼体系结构。</p>
<p>后端开发的技术门槛是如何降低的呢？就是出现了越来越多的开发框架，使得开发者避免了重复发明轮子。你可以把开发框架想象成模具。只需要根据具体需求对模具调整加工，就可以立即生产出符合自己要求的服务应用来。</p>
<h1 id="痛点"><a href="#痛点" class="headerlink" title="痛点"></a>痛点</h1><p>本文介绍的开发框架，是基于Python语言的Django，它简单、便捷而强大。</p>
<p>你可以上网搜索到一个叫做”Django Girls Tutorial”的<a href="https://tutorial.djangogirls.org/en/" target="_blank" rel="external">教程</a>。顾名思义，这是专门教女孩儿如何用Django的。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-fbe9c4746c7bda4c.jpeg" alt=""></p>
<p>这……是不是性别歧视啊？</p>
<p>​不是。因为教育者发现有的女孩子容易受到社会偏见的影响，把IT技术理所当然想象成男孩子才能做的事儿，所以连碰都不去碰，错失了很多接受教育和选择就业的机会。于是他们发起一项运动，通过一系列培训，改变部分女孩子们的这种错误认知。</p>
<p>​Django是个非常好的出发点。它足够简单，可以让初学者快速上手，并且做出实用的网站，从而建立对IT学习的信心。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-3195ba0f98e7b4c1.jpg" alt=""></p>
<p>你需要在数据库存储用户信息，可是不会SQL语言？没关系，可以利用框架提供的通用方法操作数据库。</p>
<p>你需要用户提交表单，可是懒得自己写HTML？不要紧，只需要两三行代码框架就能替你完成。</p>
<p>听起来是不是很神奇？是不是打算立即上手试一试？</p>
<p>别急。</p>
<p>如果你没有好的教程指引，仅是搭建Django开发环境这个过程就会很痛苦。太多的教程都没有搞清楚教学对象的需求。教程作者们总是在可能出现问题的环节轻描淡写，导致初学者很容易踏进坑里，然后挣扎半天爬不出来，挫折无助直至放弃。</p>
<p>本教程的特点，就是用清晰的步骤帮助初学者绕开可能的坑，一步步完成开发环境的搭建和试运行，从而建立信心和积累学习实践的成就感。</p>
<p>需要说明的是，因为本人使用的是苹果电脑，本文中演示的都是macOS系统下的步骤。不过我们用到的软件基本上都是跨平台的。如果你使用的是Windows或者Linux，可以选择适合自己操作系统的版本。软件界面环境和操作步骤大同小异。</p>
<p>我们开始吧。</p>
<h1 id="套件"><a href="#套件" class="headerlink" title="套件"></a>套件</h1><p>为了最大可能地避免安装软件包带来的麻烦，我建议你安装Anaconda套件。</p>
<p>​如果你只是需要进行Web开发，安装Anaconda确实有些大炮轰蚊子的感觉。因为它会一股脑给你安装上很多其他好用（但你可能暂时用不上）的软件包裹。</p>
<p>​但是对于现在的计算机来说，这点儿空间占用不算什么大事儿。而且Python作为一种通用开发语言，在你工作生活中许多环节都有可能用得上。Anaconda的软件包管理机制非常便捷易用。一次安装后，你可以长时间享受它带来的各种便利。因此安装该套件利大于弊。</p>
<p>​请到<a href="https://www.continuum.io/downloads" target="_blank" rel="external">这个网址</a> 下载最新版的Anaconda。下拉页面，找到下载位置。根据你目前使用的系统，网站会自动推荐给你适合的版本下载。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-50f3cfb7830ba672.jpeg" alt=""></p>
<p>请注意，下载页面区隔出左右两栏，分别对应套件不同的Python语言版本。左侧是3.6版，右侧是2.7版。千万不要根据常识，判定3.X版本一定优于2.X版本。不是这样的。请根据你准备使用的具体开发环境来进行选择。如果你是初学者，建议你点击右侧的绿色下载按钮，下载2.7版本。</p>
<p>​后文你会看到，对于咱们做Web开发来说，这里套件Python的版本其实没有太大关系。因为在具体开发语言版本，在配置的时候，你完全可以重新自由选择。</p>
<p>​下载下来的文件是个以pkg作为扩展名的包裹，双击它，然后根据提示一步步安装就好了。全中文界面，非常友好。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-1fd5ab13d0e7b591.jpeg" alt=""></p>
<p>安装完了？</p>
<p>​现在你的系统里面就有了全套的Python生态环境了。你完全可以在命令行用pip安装Django，然后在Sublime Text, Atom，甚至是Anaconda自带的编辑器里开始编写Python程序了。</p>
<p>​但是我们不仅需要把安装配置变得简单，还要在未来的实际开发中享受更完善便捷的功能。因此，我们需要安装一个集成开发环境（Integrated Development Environment, IDE）。</p>
<p>​我们选择的集成开发环境，是PyCharm。</p>
<h1 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h1><p>PyCharm是Python开发的利器。它把各种脏活累活默默在后台一手承担，把开发者解放出来。</p>
<p>PyCharm支持macOS，Windows和Linux。一旦你习惯了它的使用方式，那么即使工作环境迁移到其他操作系统，也不会受到很大影响。</p>
<p>你需要到<a href="https://www.jetbrains.com/pycharm/download/#section=mac" target="_blank" rel="external">这个地址</a>下载最新版的PyCharm。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-880eb81dfd389cc2.jpeg" alt=""></p>
<p>下载之后，双击dmg文件。出现如下提示。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-b2478eaf6347ecb0.jpeg" alt=""></p>
<p>安装无非就是把左侧的可执行文件图标拖拽到右侧的“应用”(Applications)目录图标上。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-6f0edacee03b56b4.jpeg" alt=""></p>
<p>等进度条到头，安装就算完成了。然后你可以在应用目录下找到PyCharm。双击执行即可。首次执行的时候，可能会弹出以下窗口。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-34ea4ed43f1661d3.jpeg" alt=""></p>
<p>这是系统的默认安全提示。别理他，继续打开就好。</p>
<p>当你看到如下图所示的启动界面的时候，安装就成功了。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-ae298496bc475b61.jpeg" alt=""></p>
<p>集成开发环境安装好了。它有什么作用呢？</p>
<p>​别着急。下面我们就要展示如何用它来方便地安装Django，并且尝试运行你自己的第一个网站应用了。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>PyCharm下安装并且配置Django开发环境，真的如同搭积木一样简单。</p>
<p>首先，我们在开始界面下，执行新建项目(Create New Project)。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-7c1e39b60042d3a2.jpeg" alt=""></p>
<p>然后你会看到如下图所示的界面。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-16135b492d031e6c.jpeg" alt=""></p>
<p>左侧选择Django，右侧的Location填写你打算保存项目文件的目录位置。</p>
<p>目录命名时一定要注意，只能包含字母、数字和下划线。出现其他字符会报错。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-8bc7cedd6cf9bd49.jpeg" alt=""></p>
<p>我们把其中错误的连接符改成下划线，就可以顺利通过检验了。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-2f918c917f840d1f.jpeg" alt=""></p>
<p>下面我们要进行一项非常重要的工作——指定开发用Python版本了。请点击Interpreter这一行最右侧的配置按钮。你会看见以下4个选项：</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-d14228f4b450c71d.jpeg" alt=""></p>
<p>请选择第4个，Create Conda Env。PyCharm将通知Anaconda：“嘿，老兄，为了实验Django编程，我需要你提供一个虚拟软件环境！”</p>
<p>​这里解释一下什么叫做虚拟软件环境。我们在开发的过程中，使用的Python版本、调用的软件包版本可能都是不一样的。例如对项目A，你可能用的是Python 3.6 + Django 1.10，对于项目B，你用的可能是Python 2.7 + Django 1.11。这就很困扰了。因为你可能听过一句谚语“一个人不能同时去追两只兔子”。</p>
<p>​对，如果你把开发环境设定为唯一的，那你就需要先装Python 3.6, Django 1.10，测试项目A，测试通过后你删了Python 3.6和Django 1.10，安装Python 2.7，Django 1.11，然后测试项目B。这时你突然发现项目A可能需要改写，加入新的功能，于是你又删除了Python 2.7和Django 1.11……</p>
<p>​折腾不折腾啊？</p>
<p>​好的软件开发人员，是最不喜欢在这种无谓的细节上瞎耽误工夫的。所以他们做出了虚拟环境。你可以在虚拟环境1里面安装Python 3.6和Django 1.10，专门用于开发项目A。虚拟环境2安装Python 2.7和Django 1.11，用于开发项目B。两个虚拟开发环境虽然都安装在了同一台电脑上，但是相互独立，互不干扰。你可以在它们中间随时方便切换。</p>
<p>​强大吧？</p>
<p>​PyCharm充分利用了虚拟环境的强大特点。点击Create Conda Env后，软件弹出以下的对话框。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-06d9c463e2e361f9.jpeg" alt=""></p>
<p>你需要给新建的虚拟开发环境起个名字。就叫django_py27吧。好记！</p>
<p>​然后你需要选择一下Python语言版本，我们点开下拉列表看看。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-1bb0c660a3716c6e.jpeg" alt=""></p>
<p>可以看到，各种Python语言的版本一应俱全，任君挑选。</p>
<p>​我们确认了选择Python 2.7版本之后，PyCharm就开始为我们搭建指定虚拟环境了。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-78e19bc49bab3dc5.jpeg" alt=""></p>
<p>这个过程可能需要等待一会儿。虚拟环境搭建完毕后，你可以看到Interpreter右侧的路径变成了我们设定的虚拟环境。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-b9e0907bc5172cee.jpeg" alt=""></p>
<p>点击右下角的Create，让PyCharm自己帮我们安装Django吧。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-f58177bbcb4920c1.jpeg" alt=""></p>
<p>PyCharm不仅安装了Django，并且在我们指定的路径下搭好了基础框架结构。如下图所示：</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-81d05890096ee055.jpeg" alt=""></p>
<p>下面该干什么呢？我们来尝试一下运行这个初始框架吧。</p>
<h1 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h1><p>在PyCharm顶部的菜单栏里，选择Run，会出现以下功能列表：</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-3d88b6251cc79100.jpeg" alt=""></p>
<p>我们就选择其中的第一个，Run ‘django_course’即可。</p>
<p>​如果一切正常，你会在PyCharm底部窗口中看到如下提示：</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-43dfb1fcd4d05680.jpeg" alt=""></p>
<p>点击其中的蓝色链接，浏览器会开启，并且访问本地已运行的Django App服务。</p>
<p>你会看到如下页面：</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-3090ed8d91e1a37e.jpeg" alt=""></p>
<p>正如页面中提示的那样——“It worked!”</p>
<p>祝贺你，已经成功安装和配置了全套的Django开发环境，而且测试运行了自己的第一个Web应用了。</p>
<h1 id="讨论"><a href="#讨论" class="headerlink" title="讨论"></a>讨论</h1><p>除了本文介绍的方法外，你还知道哪些其他的Django开发环境便捷搭建方式？你在学习Django的过程中，有什么经验和教训？欢迎留言分享给大家，我们一起交流讨论。</p>
<p>如果你对我的文章感兴趣，欢迎点赞，并且微信关注和置顶我的公众号“玉树芝兰”(nkwangshuyi)。</p>
<p>如果本文可能对你身边的亲友有帮助，也欢迎你把本文通过微博或朋友圈分享给他们。让他们一起参与到我们的讨论中来。</p>
<h1 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h1><ul>
<li><a href="http://www.jianshu.com/p/e4b24a734ccc" target="_blank" rel="external">如何用Python做词云？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/721190534061" target="_blank" rel="external">如何用Python做中文分词？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/d50a14541d01" target="_blank" rel="external">如何用Python做情感分析？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/4ea083874df4" target="_blank" rel="external">如何用Python做舆情时间序列可视化？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/67a71e366516" target="_blank" rel="external">贷还是不贷：如何用Python和机器学习帮你决策？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/fdde9fc03f94" target="_blank" rel="external">如何用Python从海量文本抽取主题？ - 简书</a></li>
</ul>
<h1 id="作者信息"><a href="#作者信息" class="headerlink" title="作者信息"></a>作者信息</h1><p>王树义，大学教师，终身学习者。稍微懂一点儿写作、演讲、Python和机器学习。欢迎微信关注并置顶我的公众号“玉树芝兰”(nkwangshuyi)。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/08/14/你该不该清理“不常联系的”微信好友？/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王树义">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oejqwrqkh.bkt.clouddn.com/temp_atom-c5fd7e52.JPG.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉树芝兰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/08/14/你该不该清理“不常联系的”微信好友？/" itemprop="url">你该不该清理“不常联系的”微信好友？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-08-14T22:05:40+08:00">
                2017-08-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>如果你知道腾讯究竟在做什么，这个问题的答案可能就没那么简单了。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-a468c972ffe654f0.png" alt=""></p>
<h1 id="名单"><a href="#名单" class="headerlink" title="名单"></a>名单</h1><p>前几天，微信上线了一个功能——批量发现那些“不常联系的朋友”。</p>
<p>这个功能可以帮你快速从长长的微信“好友”列表中找到下面这些家伙：</p>
<ol>
<li>半年内无单聊；</li>
<li>无共同小群；</li>
<li>半年内没有回复过他（她）的朋友圈。</li>
</ol>
<p>这样的标准还远远不够智能。估计十个人里至少有九个不敢把自动筛选出来的所有人都“处理”掉。微信也清楚，所以把结果抛给你，让你以人工方式对结果做出甄别。</p>
<p>一番辛苦之后，你就对名单里剩下的那些可怜家伙们握有“生杀大权”了——微信给你的选项包括屏蔽朋友圈，或者干脆删除等。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-b213aa45e7145b8d.jpg" alt=""></p>
<p>该功能推出前，一个网红青年就在公众号里面高调宣布要清理大量微信好友。但是手动删了百十来个，就累坏了。这时微信“不常联系的朋友”功能内测截图在朋友圈传播，他简直如同抓住了救命稻草一般欢呼雀跃。决定等两天，借用该功能下手。估计这几天他一直很忙。</p>
<p>我只能说估计。因为我看到他的公众号后，第一时间就把他删了。</p>
<p>有人欢喜有人愁。“不常联系的朋友”功能刚开始测试，微信用户群的乱象就爆发了。</p>
<p>没有找到这个“不常联系的朋友”功能的人，焦急地到处询问何时能通过更新获取。</p>
<p>用上这个功能的人，对着长长的名单列表倒吸一口凉气，犯了犹豫症。</p>
<p>之前隔三差五群发信息测试自己是否被删的焦虑症患者们，现在又开始发信息嘘寒问暖，抢着跑到别人朋友圈状态下点赞。</p>
<p>我的许多IT界朋友最近总被骚扰，亲朋好友时常跑来咨询——误删除了的好友和聊天记录怎么恢复？</p>
<p>……</p>
<p>要不要清理不常联系的好友？这是你自己的选择。就如同有人买手机第一时间要贴膜，刚买回来的电脑当天就要用XX大师“优化”一样。劝是劝不住的。</p>
<p>然而，你是否仔细思考过，微信为何会在此时，推出这样一个让用户们“拔刀相向”的功能呢？</p>
<h1 id="刚需"><a href="#刚需" class="headerlink" title="刚需"></a>刚需</h1><p>如果你问微信官方，他们肯定会告诉你，是为了帮你跟那些“僵尸好友”、“休眠好友”断舍离，从而更好维护自己的社交关系。甚至可能会充满自豪感地告诉你，许多用户已经对该功能呼唤期待已久，这是刚需啊！</p>
<p>这样说，不能算错。</p>
<p>现实生活中，一般人能够维持的强关系数量，大概是150左右。这就是著名的“邓巴数”(Dunbar’s number)。</p>
<p>150个人，差不多就是一个聚落、一个村庄，或者一个社区的人数。这符合人类长期以来在进化过程中适应的群体规模。</p>
<p>如果你的关系数量超过邓巴数，那么你基本上不太可能跟其中的每个人都能维持长期稳定的密切联系。也就是说，你会有<strong>弱关系</strong>甚至<strong>伪关系</strong>。</p>
<p>微信给你的好友上限是多少？</p>
<p>5000个。</p>
<p>所以你在微信上会有许多“不常联系的朋友”。除了那些因为临时事件添加的人员外，大部分朋友或者熟人其实都是因为优先级太低，时间分配不过来，所以联系变得稀疏。</p>
<p>别怪他人不常联系你，这种疏离你自己也有责任。小学同学、前同事……这些当初朝夕相处，关系融洽的人，你一直都想着定期问候对方了吗？</p>
<p>这些人的休眠状态，对你的日常生活没什么影响。大部分人的好友数量虽然早就超越了150，却还远远没有接近5000这个上限。</p>
<p>你也不用怕朋友圈被这些人偷窥。八百年不联系的人，基本上没兴趣看你的朋友圈。</p>
<p>对绝大部分微信用户来说，这种“不常联系朋友”的断舍离，着实算不得一种刚需。</p>
<p>即便成了刚需，提升好友数量上限也就好了嘛。在技术上，这比提供“不常联系朋友”发现功能要省事儿得多，经济实惠。</p>
<p>微信每一项功能的改进，都是保守稳重的，这次却一改平时持(mo)重(ceng)的作风，似乎根本没有预见到联系人列表大清理会带来的震荡。好比邻居熊孩子吵着要打鸟儿，你帮他做把弹弓也就算了。把一挺机关枪扔给他，是不是有些不太合适呢？</p>
<p>你逐渐意识到问题的真相了吧？——清理掉（或者至少屏蔽朋友圈）那些不常联系的、不重要的朋友关系，并不是你的刚需，而是<strong>微信的刚需</strong>。</p>
<h1 id="噪声"><a href="#噪声" class="headerlink" title="噪声"></a>噪声</h1><p>作为一款社交媒体，微信早已知道了你的许多信息。</p>
<p>你爱读什么样的文章，你喜欢买什么东西，吃什么口味的餐馆；你平时会到哪里旅游，你的收入大概状况；你住在哪里，工作场所在哪里，乘坐什么交通工具；你上班的时候是否专心，上课的时候是否溜号；你是否喜欢读书，你是否懒到不喜欢文字输入而喜欢用语音，你的口音是什么样子的；你跟朋友爱聊什么话题，以及你们在聊天记录中谈及的银行卡号、密码、电话号码……</p>
<p>总之，如果上学的时候微信当你的班主任，那你简直就生无可恋了。</p>
<p>可是微信不满足。这些信息里面，包含着大量的噪声。</p>
<p>许多噪声，都是因为人们的虚荣心整出来的。</p>
<p>你闲下来的时候，最爱刷朋友圈，特别爱看其中的娱乐八卦。但是为了追求女神，可能会买来一本《柏拉图对话录》，微信聊天里大谈苏格拉底对真理与美关系的理解。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-a021bcfd0a041703.jpg" alt=""></p>
<p>你一般都在楼下的苍蝇小馆吃素面。可是你发布的自拍，从来都只是那些高档餐厅的特色美食。</p>
<p>你休假时去爬了个土坡，大声抱怨“这也算2A级景区？！”于是把朋友在瑞士徒步拍摄的雪山美景扔到了朋友圈。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-ef4a96ddbe960bb3.jpg" alt=""></p>
<p>这种事，会让微信很苦恼。人家需要分析你的数据，然后把合适的广告推送给你。明明应该推送小黄车优惠的，因为你发的信息不准确，结果误把玛莎拉蒂推给了你。搞得你好几天都很励志的样子，这很不科学。</p>
<p>怎么办？微信必须找到一个锚点，一种不好作假的信息，来对用户准确画像。当然，这种信息微信还得能获取到。</p>
<p>这个锚点，就是你的关系网络。因为相对于其他指标，关系网络信息造假成本很高。</p>
<p>微信关系网络是双向的，这跟微博有很大的区别。谁都可以在微博上关注李开复，但是你要想把李开复加为微信好友，是需要经过他本人同意的。</p>
<p>如果你的朋友圈里“谈笑有鸿儒，往来无白丁”，那你多半非富即贵。反之亦然。</p>
<p>微信最不满的，就是你不守规矩。</p>
<p>为了不用现金，你加了快递小哥或者外卖小妹微信转账，后来还忘了删。而那些你很珍视的人，却顶多只是给他们的朋友圈点个赞，没有能够经常嘘寒问暖，导致微信看不出对方的价值，耽误很多商机。</p>
<p>长此以往，如何了得？！</p>
<p>这次微信给了你方便的工具。来，快点儿告诉我，这堆用户里面，哪个跟你不是一类？哪个即便从来不理你，你也不会删除？哪个就算天天跟你请安，你也要拉黑？……</p>
<p>你可能很愤怒。但是别冲动。</p>
<p>我本来想劝你，不要轻易去用这个功能。</p>
<p>直到我看见了腾讯的另一个举动。</p>
<h1 id="信用"><a href="#信用" class="headerlink" title="信用"></a>信用</h1><p>也在这几天，腾讯宣布了另外一件事儿——要对用户做信用评级。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-d39fb757313b970a.png" alt=""></p>
<p>我看完了这个消息，心头一凛。要说微信联系人清理和腾讯信用评级这两件事情没有关联，我不信。</p>
<p>打开你的支付宝，看看自己的芝麻信用分数。</p>
<p>这分数很重要。现在很重要，将来更重要。当得分足够高的时候，你能享受各种便利。包括租房子、租车免押金，甚至曾经还能加入一些高端网络社群。如果分数不够高……建议你再复习一遍《黑镜子》第3季第1集。</p>
<p>比分数更重要的，是评分的依据。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-520172f76199082e.png" alt=""></p>
<p>芝麻信用评分包含5个主要指标，其中之一就是“人脉关系”。阿里曾做过各种尝试，希望你在支付宝里面交朋友。这样，它就可以利用社交网络关系数据，更为准确刻画每个用户的信用评分。虽然各种努力都不怎么成功。</p>
<p>我上课的时候，不止一次告诫学生，支付宝上交友一定要谨慎。</p>
<p>假设你不幸在支付宝上跟老赖或者骗子建立了朋友关系，等他们信用崩盘的时候，你也要受到波及。如果你芝麻信用分数高，肯定有很多人打算加你为好友。对于这种请求，你要审慎对待，不可轻易同意。相反，如果你信用分数不够高，找信用高的人交朋友，可以有助于你提升信用值。</p>
<p>大家缺乏在支付宝上添加朋友的动机。有啥事儿，微信上聊呗。</p>
<p>对，微信上聊。可现在腾讯也大张旗鼓做信用评分了。</p>
<p>微信和QQ的交易数据已经有了一定积累，社交数据更是腾讯的传统优势。相较于支付宝，腾讯更可能在信用评分计算中，充分利用你的社交网络关联数据。以下是腾讯信用的主要指标图示：</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-2993a462b837689f.png" alt=""></p>
<p>其中的社交指数一项，腾讯是这样解释的：</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-a0b77db99af4d2d7.png" alt=""></p>
<p>看到没有，其中明晃晃包含“好友的信用情况”字样。</p>
<p>这把用户逼到了一个两难境地。</p>
<p>如果你清理好友，那么你的强关系网会更真实，微信就可以更了解你。你的隐私基本上就是个笑话，各种量身定做的广告会如影随形。当然，你也可能乐在其中。</p>
<p>如果你不清理好友，那么朋友圈里面每个不熟悉的人都可能变成一颗定时炸弹。一旦他们发生了信用问题，甚至违法犯罪，系统会自动调低你的信用值。你冤不冤？</p>
<p>你可能觉得我危言耸听。我也希望如此。</p>
<p>可惜在现代社会里，那些看似简简单单的分数确实是真金白银，会影响你的工作和生活。</p>
<p>不信？问问那些跟大众点评合作的商家吧。</p>
<h1 id="建议"><a href="#建议" class="headerlink" title="建议"></a>建议</h1><p>微信给你的这个清理好友辅助工具，目前看来很初级，大量动作需要手动完成。但是估计后面会不断迭代，甚至引入人工智能，以帮助你对好友进行快速自动化分类筛选和清理。微信有充足的动机这样做。因为主要目的并非是为了你的朋友圈更健康，而是准确地分析出你的阶层、能力、爱好等特征。</p>
<p>本文中，我带你领略了这些信息可以发挥的一些功用，包括精准营销和信用评级。但是这只是冰山一角。掌握了数以亿计活跃用户的精确数据后，可以做什么，是件考验想象力的事儿。</p>
<p>我给你的建议是不要急于删除那些不常联系的亲朋。“士别三日，当刮目相看”，每个人都有成长的可能性。多花些时间沟通问候、联络感情，有可能会有意外收获。</p>
<p>但是对于非朋友关系，特别是你不够了解的联系人，该清理的时候不要手软。今后新添加微信联系人时，一定要谨慎。如果对方信用存疑，更要避免添加。以免将来被系统武断地“连坐”。</p>
<h1 id="讨论"><a href="#讨论" class="headerlink" title="讨论"></a>讨论</h1><p>你使用微信“不常联系的朋友”功能了吗？你如何评价这个功能？你看好腾讯的信用评分功能吗？在信用评分这个细分市场，你觉得腾讯和阿里谁更胜一筹？欢迎留言，把你的心得想法分享给大家，我们一起交流讨论。</p>
<p>如果你觉得这篇文章对身边的好友有用，也请把它分享到群组与朋友圈里，让更多你关心的人都能看到。</p>
<h1 id="作者信息"><a href="#作者信息" class="headerlink" title="作者信息"></a>作者信息</h1><p>王树义，大学教师，终身学习者。稍微懂一点儿写作、演讲、Python和机器学习。欢迎关注我的公众号“玉树芝兰”。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/21/如何选研究题目？/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王树义">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oejqwrqkh.bkt.clouddn.com/temp_atom-c5fd7e52.JPG.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉树芝兰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/21/如何选研究题目？/" itemprop="url">如何选研究题目？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-21T15:11:17+08:00">
                2017-07-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="http://oejqwrqkh.bkt.clouddn.com/1DyycR11Ioao7P-NU2xM-large.png" alt=""></p>
<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>这篇文章，是写给我去年入学的研究生的。暑期之后，他们中的几位就要开题了。</p>
<p>本着一贯的开放原则，我把这篇文章同时发布到网络上。欢迎有需要的高年级本科生或低年级研究生同学一起阅读。</p>
<p>前些日子，我参加了哈工大的“大数据与商务分析”暑期学校。这段日子的记忆是炎热、匆忙和充实的。我收获了许多东西，尤其是在科研思路方面。从前有许多迷惑的地方，都从诸多高人那里获得了答案。即便有些问题不是一两句话能说清的，热心的学者们也给了我充分的指引。</p>
<p>回津后这些日子，我一直在认真整理笔记，并且按图索骥来读书、看文章，希望把思路理清，并且记录下来。</p>
<p>收获太多，我可能要写若干篇文章，才能把在科研领域认知升级的过程记载清楚和完整。</p>
<p>通过本文，我把这些收获和感悟分享给你。希望你和我一样，充分利用好这个假期，在科研之路上精进前行。</p>
<h1 id="遗憾"><a href="#遗憾" class="headerlink" title="遗憾"></a>遗憾</h1><p>这次暑期学校，你真的应该来参加。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1DywyT11Ioao7g-DAGNq-large.png" alt=""></p>
<p>至少，也该来看看你们的导师是怎么当“麦霸”的。</p>
<p>别误会，我说的并不是K歌。事实上，因为五音不全，我在别人K歌的时候，向来只愿意做一枚安静的听众。</p>
<p>我说的“麦霸”，是指每次演讲中的提问环节，坐在第一排的我都是第一个举手。每次哈工大的工作人员都是摇头叹气把麦克风递给我，我一张口说话，背后就是窃窃私语声一片。</p>
<p>我不在乎。</p>
<p>我来的目的，不只是当听众的。</p>
<p>所谓“学问”，除了要学，还得要问。我远道而来，是要跟国际一流顶尖学者<strong>交流</strong>的。不问问题，怎么交流？</p>
<p>需要交流的动力，是我脑子里面有一大堆亟需验证的假设，需要找应用数据科学做研究的权威专家做验证。这种低成本快速验证的想法，来自于D9X的阎总。他的创新思维工作坊让我受益良多。</p>
<p>暑期学校邀请的讲座学者都是做数据科学+信息管理研究的。我简直如同刘姥姥进了大观园一般。眼花缭乱，看什么都觉得新奇有趣。</p>
<p>我提的许多疑惑问题，如果自己尝试，花费的精力和机会成本都是巨大的。</p>
<p>这些宝贵的知识和经验，不能不善加保管。我认真整理了笔记，打算通过系列文章的形式分享给你。</p>
<p>今天这一篇文章，急用先学，就讲讲科研选题吧。我大致归纳了以下6种常见的选题导向，一一帮你剖析。希望能够帮助到你的开题和今后的科研。</p>
<h1 id="方法导向"><a href="#方法导向" class="headerlink" title="方法导向"></a>方法导向</h1><p>我一直跟你反复强调的那句话，还记得吗？</p>
<blockquote>
<p>To the one with a hammer, everything looks like a nail.<br>翻译过来，就是“当你手里拿着一把锤子的时候，看啥都像钉子”。</p>
</blockquote>
<p>如果你仅仅把论文当成是方法论课程的实践作业，那你很可能也会这么想，并且这么做。</p>
<p>可是方法运用得再高妙，如果与你的研究问题不匹配，也是枉然。</p>
<p>更何况许多人对方法只是一知半解。他们真正学会的只是鼓捣出一堆来源可疑的数据，然后扔到统计软件的绞肉机里面，等着漂亮的结果从另一端奔涌出来。</p>
<p>天上真的能掉馅饼吗？不，你只会看到这样的结果。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1DywWs11Ioao7v-f6VJx-large.png" alt=""></p>
<p>没错，垃圾进，垃圾出。</p>
<p>因为你的逻辑可能是这样的一个三段论：</p>
<p>大前提：狗都有4条腿</p>
<p>小前提：我家的猫有4条腿</p>
<p>结论：我家的猫是一条狗</p>
<p>你们可能觉得自己学过的东西更高级一些，不会犯这些毛病。</p>
<p>例如学了爬虫，你就可以随心所欲找自己需要的研究数据了。根本无需去伪造数据，或者担心别人填写你的问卷的时候胡乱应付。</p>
<p>学了R，你就可以做出非常漂亮的回归分析结果和图表，甚至能处理时间序列。</p>
<p>学了机器学习，你就可以让机器替你干脏活儿累活儿，帮你快速分析出决策树、做出词云，甚至是做文本情感分析与主题发现……</p>
<p>但是，即便这样，也请你记住——不管多么时髦和高级的工具，也不应该成为你论文选题的起点。把高中数学老师教给你的那一套“分析法思考，综合法证明”的小聪明暂时收起来。否则一叶障目，你就会丧失自己的起点。迷茫的结果就是做出了一大堆劳动成果，却没有解决任何值得解决的问题。</p>
<p>选用了某种方法时，一定要问自己几个问题：</p>
<ol>
<li>为什么要使用到这种方法？是因为自己熟悉吗？是因为别人不熟悉吗？</li>
<li>这个问题是否适合这种方法？有没有其他方法可以更好处理该问题，即便这个方法你并不熟悉？</li>
<li>你能获取到这种方法需要的数据吗？这些数据通过该方法的处理，能否产生你需要的形式？</li>
</ol>
<p>选题、做题都是有机会成本的。把时间花费在值得的事物上。切记。</p>
<p>研究要有目的。最重要目的是要解决一个具体或抽象的问题，而且这个问题还应该有价值和意义。</p>
<p>我这样说，不是让你停止学习研究方法。</p>
<p>恰恰相反，方法不仅要学，还一定要多学。但是学过之后，要放弃“一定要应用某一方法”来做研究和写论文的执念。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1DyxED11Ioao7L-HkKwU-large.png" alt=""></p>
<p>Anindya Ghose说，只有你掌握的方法足够多了，工具箱里面有各种各样不同工具的时候，你才不会偏执于某一种方法，而是根据问题去筛选合适的解决途径。</p>
<p>方法导向看来对论文选题不合适。怎么办呢？很多人会抢答说“问题导向”啊。</p>
<p>说的没错，但是仅仅说“问题导向”其实并缺乏可操作性。问题从哪里来，该怎样寻找？</p>
<p>通过和一流学者的交流，以及文献的阅读，我梳理出问题来源的以下常见类别：</p>
<ol>
<li>文献；</li>
<li>数据；</li>
<li>实践；</li>
<li>协同；</li>
<li>系统。</li>
</ol>
<p>下面我来当个导游，带你在不同的问题来源中游览一番。希望聪明的你可以掌握它们，并且找到适合自己的问题寻找途径。</p>
<h1 id="文献导向"><a href="#文献导向" class="headerlink" title="文献导向"></a>文献导向</h1><p>做研究、写论文需要读文献，这是常识。</p>
<p>许多研究者会建议你从文献发现问题。这也是一种公认的传统智慧。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1DyIsg14536Fdo-u3m8R-large.png" alt=""></p>
<p>被戏称为“洋八股”的研究文献，实际上是学者们跨越时空的对话。这种特殊的对话体例，不仅要求作者去梳理相关的历史文献脉络，还得在论文末尾标出来文章的限制和未来需要做的研究，即所谓“展望”。</p>
<p>很多老师会让学生从这里着手，去发现别人研究局限，然后通过突破这些局限，替别人把展望变成现实，从而做出属于自己的原创性研究。</p>
<p>这个方式好不好？理论上是好的。论文结尾放这么一个部分，本意就是给后来人提供合适的路标和前进方向。</p>
<p>然而，现实往往是复杂的。许多经验丰富的研究者对此心知肚明，却因为各种原因不愿意或者没有合适的办法告诉你。这就是科研的潜规则吧。</p>
<p>现实世界中，那些“限制”、“展望”其实不是实在的路标，而是研究者们望洋兴叹的产物。他们就如同“笑傲江湖”里面的魔教长老一样，手持利斧开山数百丈。所不同的是他们并没有累死，而是停下来，告诉你“嗯，往这个方向走是没错的”。</p>
<p>除非你幸运如令狐冲，否则别指望剩下的山体可以一捅就破。大部分情况下，你恐怕还得另外开山数百丈……</p>
<p>能解决的问题，原先的研究者肯定早已解决完了。谁会把容易解决的问题留着？积攒这些问题和存款不同，不会给你带来任何复利。</p>
<p>更何况，审稿人哪里会对容易解决的遗留问题“高抬贵手”？肯定会穷追猛打，让作者反复磨合，真正解决了它们才肯善罢甘休。</p>
<p>被审稿人和编辑放过的“未解决”问题，要么是非常难以攻克的问题，实在不便强人所难；要么是工作量很大的问题，完全可以自成一体，再写一篇文章。放心，当你有幸在期刊上读到正式发表论文的时候，后一篇文章原作者早已写完了。</p>
<p>这就如同是王戎说李子是苦的一般。如果你运用理性思维琢磨一下，就会发现其中的关窍。</p>
<p>正因这种潜规则，Google首席经济学家，UC Berkeley的教授Hal Varian提出，千万不要在构建完成一个新的模型之前，去寻找和阅读相关文献。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1DyxiK11Ioao7F-oGJhb-large.png" alt=""></p>
<p>这里有2个考虑：</p>
<ol>
<li>好的文献绝不会给你留下容易解决的好线索；</li>
<li>你的思路会跟着这些走在“主流”上的大牛走，于是彻底钻到一个死胡同里面去。对于本来可以轻易发现的新线索，你会自动忽略它们。</li>
</ol>
<p>因此，他建议人们先去把模型做出来，然后修正模型到可以接受的简化程度。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1DyxlG11Ioao7I-mKnQC-large.png" alt=""></p>
<p>有了这样一个模型，再去读文献。这时候可能你会发现数十年前这个问题就有人做过了。</p>
<p>不过不要沮丧，这不是大问题。</p>
<p>这恰恰证明你的独立科研能力已经达到了（至少在当时）可以发表优秀期刊的水平。对于研究的初学者来说，这是一种非常积极的反馈。下面用你的经验去追寻新的问题和模型。如果你的模型和原作者有细微的区别，那就更好了。从这些差别中，可能会做出极其有价值的发现。</p>
<p>另外一位学者，佐治亚理工的吴东军教授(D.J. Wu）提的办法就更有意思了。他的办法属于典型的看热闹不嫌事儿大——让经典文献PK！</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1Dysz911Ioao5Y-Na4sM-large.png" alt=""></p>
<p>文献都不是生物，怎么PK？其实许多文献确实在打架。例如一篇文献A提出某观点。可能一段时间以后另一篇文献B用坚实的证据把该观点驳斥得体无完肤。</p>
<p>人们就倾向于新的文献B观点，奉为圭臬。但是文献A当初是怎么从审稿人的手底下滑过去的？它想必是有合理和可取之处的。</p>
<p>吴老师于是就从这样的文献间冲突出发，用更为全面的模型考虑在哪一种情况下，A的论点依然会成立。从而对经典文献给予（有条件的）支持。</p>
<p>由于文献A和B冲突的公案，他所作的研究意义和价值已经不言自明。因此这是一种非常聪明而有效的文献利用方法。</p>
<p>发现、理解，而且还恰好能重新诠释经典文献冲突，听起来很美妙。然而，并非所有人都有这样的运气和毅力的。所以，为了发现问题，你还需要有其他的手段。例如本次暑期学校的主题——“数据”。</p>
<h1 id="数据导向"><a href="#数据导向" class="headerlink" title="数据导向"></a>数据导向</h1><p>如果你手里有好的独特数据，可以尝试从中获得选题。</p>
<p>这次的暑期学校，有半天的时间是编辑-作者交流。由于MISQ的主编Arun Rai和ISR的主编Alok Gupta都在，所以分成了2组，每一组分别有3-4位作者上去展示自己的论文，寻求主编大人的意见。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1DyxwN11Ioao7J-Fz22E-regular.png" alt=""></p>
<p>有位作者展示的是利用Foursquare数据对用户行为做预测的研究。我对该文章感兴趣，是因为我做隐私保护研究，很好奇用户的隐私是不是丝毫剩不下了。</p>
<p>然而其他听众的兴趣点就在于独特的大规模数据获取了。他们从教室一直追问到了路上，问论文作者是如何收集这些数据的。</p>
<p>这位论文作者一下子有些紧张，讳莫如深。似乎害怕这份宝贵的数据很快就要被别人轻易夺走了一般。</p>
<p>这种担心不无道理。大数据时代，数据是不缺的。但是真正有价值的数据，如同沙里淘金一般。</p>
<p>专属的数据不是所有人都能搞到的。有位来自业界的老师，讲解如何和国家税务总局合作，利用发票数据来监控产能过剩问题。方法其实非常简单，只需要筛选出合适的特征就可以——他最后选择的是钢铁和煤炭。他们通过这种方式，不仅给全国企业画像，而且还通过某些指标特征，发现了其他有趣的结果。因为过于有趣，所以在修正的模型里面剔除掉了。</p>
<p>你可能觉得很不服气——这样的问题你也有能力处理啊！问题是，你从哪里搞到如此大规模的专属数据呢？</p>
<p>这个问题咱们后面会谈及。</p>
<p>如果专属数据难以获取，你可以退而求其次，找开放数据。</p>
<p>开放数据中，也有非常适合研究的类别，而且规模庞大。例如Google的Correlate和Trends数据，以及Twitter的Firehose开放数据等。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/temp_atom-5a03f376.png" alt=""></p>
<p>但是请注意，如果你利用开放数据做研究，速度是非常重要的。这是个竞争激烈的领域，慢了就什么都落不下了。</p>
<p>哈工大管理学院的叶院长，提到了自己研究里面曾经用过的百度数据。当时和Google的相应搜索数据进行比对研究，效果非常好。后来他们团队兴冲冲拿给百度的人看过。对方没说什么，回去就把数据下载的接口给关闭了。</p>
<p>好在高价值开放数据，也不都是“不小心”流出来的结果。</p>
<p>例如Kaggle上面总是有非常规整的数据集，可供你使用。如果你用得好，还能获得价值不菲的奖金。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1DyIGw14536Fds-L2jsk-large.png" alt=""></p>
<p>发布数据的企业疯了吗？白给别人数据，还送钱？</p>
<p>当然不是。企业面临实际问题。他们需要利用数据驱动的方式来解决问题。解决问题，自然也可以聘用咨询师。但是注意咨询师是按照时长而非效果来收费的。与其如此，还不如公开发布数据，让大家来竞赛。用奖金作为杠杆，撬动世界上最优秀的大脑一起竞争解决问题。</p>
<p>从Kaggle的例子里面，你应该明白了一个道理——数据可以给你独特的视角和观察资料，但是其中蕴含的更为重要和有价值的问题，其实源自实践。</p>
<h1 id="实践导向"><a href="#实践导向" class="headerlink" title="实践导向"></a>实践导向</h1><p>前面提到过，Hal Varian教授认为不应该从文献里面找问题，而应该把时间花在看似不相干的报纸和杂志阅读上。</p>
<p>他推荐的报刊杂志包括：</p>
<ul>
<li>纽约时报</li>
<li>华尔街日报</li>
<li>经济学人</li>
</ul>
<p>他认为，对经济学研究者来说，读这些东西远远比看论文重要。因为它们会提到经济学家感兴趣的实际问题，可是分析过程有时漏洞百出。别人可能一笑置之，但是Hal Varian教授显然不会轻易放过这么好的选题机会。</p>
<p>其实，这就像是在讨论区里面和别人争论。如果你翻来覆去只会说一些大家都知道的内容，没有人会觉得感兴趣。而如果你你能够不断从外界获得新的灵感、信息和见识，那讲出来的内容就可以更轻易地抓住别人的注意力。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1DyIJ014536Fdu-UYksV-large.png" alt=""></p>
<p>除了这些报刊杂志之外，学者们还提到了两个很好的实践问题来源。</p>
<p>第一个就是业界咨询工作。许多好的学者，例如Anindya Ghose和Paul Pavlou等，都是两条腿走路。一条腿在学术界攀登，另一条在企业界做咨询。</p>
<p>咨询，是一定要解决问题的。所以，不用你找，问题自己就找上门来。</p>
<p>在大数据时代，做咨询必然要接触到许多企业数据。例如Ghose拿到了好几家知名的企业做数字广告的效果数据。这些数据不仅数量庞大，而且结构化完整、真实性高，是让你的研究获得竞争优势的重要源泉。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1Dya8A11Ioao59-8A1nm-large.jpeg" alt=""></p>
<p>与企业合作，是一种双赢之道。在这个社会上，一定要学会互惠合作。不要尝试做伸手党。</p>
<p>许多老师和研究生都觉得，拿数据是一件非常困难的事情——那些大公司根本就不愿意分享数据给你。</p>
<p>没错，但是你没有看到硬币的另一面。他们其实特别乐意分享数据，只要你的分析能力比他们还高，能给他们更有价值的洞见。</p>
<p>包括中国移动在内的许多中国大型国有企业都对Ghose这样的顶级学者敞开大门、张开双臂，热烈欢迎。</p>
<p>同样的数据，在不擅于分析的人手中，一文不值；到了会分析的人那里，就可以挖掘出不菲的价值。这是个“数（据）中自有黄金屋”的年代。企业解决了实际问题，获得了经济回报；你完成了研究，发表了高水平论文。这便是双赢之道。</p>
<p>可是你作为一个初级研究者，还远远没有那样的积累。大企业还是会把你拒之门外，怎么办呢？</p>
<p>从小处做起，深入进去，帮中小企业解决具体的问题。</p>
<p>我在MSU访学的时候，讲授管理信息系统课的Kizzier教授，就把学生撒出去到main street上挨个儿敲门，帮助企业发现目前系统存在哪些不足，并且想方设法加以改进。学生上课的时候分享这些案例，可以充分体现出“实践出真知”的意义。</p>
<p>获取实践问题的另一种方式是读案例。</p>
<p>前面提到的佐治亚理工吴教授，就让自己的学生去读哈佛案例库，从里面寻找问题。</p>
<p>一个企业案例，能进入哈佛的案例库是非常不容易的。经过层层筛选的经典案例往往代表了业界实践中非常典型的问题。</p>
<p>清华大学宁向东教授讲，他在哈佛读经理培训班的时候，根本就没有教材。每天接触的全都是案例。在哈佛商学院教授派珀看来，“商业世界只有问题，没有理论”。通过读案例，可以让学生找到“想问题的感觉”。</p>
<p>所以你看，一个这么经典而庞大的问题库，与实践结合紧密，理论却缺位。这难道不刚好是研究者们的好机会吗？</p>
<p>然而，据吴教授说，他的博士生里面，愿意听他话的，寥寥无几。有个叫黄涛的听了他的话，真的跑去读案例，于是成了他最为得意的学生。发展得非常好。</p>
<p>看来，听老师的话，有时候也是对的。是吧？</p>
<h1 id="协同导向"><a href="#协同导向" class="headerlink" title="协同导向"></a>协同导向</h1><p>暑期学校的最后一天。主办方把Paul Pavlou请了过来。他当时从上一站南非出发，飞了41个小时，到达了哈尔滨。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1DysA511Ioao5Z-0kuDX-large.png" alt=""></p>
<p>哈工大的张晓飞博士和华中农大的何德华老师都在课前跟我讲过，Paul是个很牛的学者。只是他们认为学术圈里的掌故，应属于默会的知识，因而并没有具体告诉我他究竟有多牛。</p>
<p>但我这个外行，恰巧就对本应默会的知识一无所知。所以当我看到Paul的演讲，嘴巴张大到合不拢了。</p>
<p>别人做学术报告，顶多是用自己的几篇文献来讲解具体的研究。或者把心得和其他学者的观点熔于一炉，娓娓道来。</p>
<p>Paul不是。</p>
<p>他介绍了移动互联网领域的几大重点研究方向。每一个研究方向，都对目前的一些顶级期刊文献进行点评。</p>
<p>他很谦卑地说，因为批评别人的作品是一件比较困难的事儿。因此——就批评自己的作品吧。</p>
<p>然后，在每一个类别下面，他都批评了几篇自己的作品。这样的幻灯页面有十好几页。他确实没有办法细讲，因为他发表过的顶级期刊(MISQ, ISR和MS等)研究成果过多。每篇讲多了的话，肯定得超时。</p>
<p>作为图情专业的研究生，你们平时主要关注国内文献（虽然我不止一次告诉你，要看英文文献。尤其是中文文献找不到，不意味着文献找不到），可能对这些国外期刊不是很熟悉。为了让你们能有个切身感受，咱们打个比方。好比一位国内图情学者，介绍自己近几年的研究，列出了三四十篇文献，全都发表于《中国图书馆学报》、《情报学报》、《中国社会科学》和《管理世界》上……明白有多厉害了吧？</p>
<p>惊呆之后，我决定问个问题。中场休息的时候，坐在第一排的我一个箭步蹿上台，问了这个颇为幼稚的问题：</p>
<p>“别的学者总说质量和数量是一对矛盾，要做权衡取舍。我看你在保证质量的同时有这么高的数量。你一定有秘诀吧？”（还不快快告诉我？！）</p>
<p>Paul笑了。说其实没有什么秘诀，也就是3条：1. 得努力工作，不能过于努力而耽误了生活，但是也得足够努力；2. 研究的问题要通俗易懂和有趣，这样才能做得下去；3. 要找靠谱的合作者。其实最近这几年他并不想出这么多文章，但是合作者（包括同事、博士生和刚刚毕业的博士）不干。他们要拿终身教职，所以一个个干劲儿十足，拽着他往前冲。</p>
<p>我一下子明白了合作者的重要性。他们所能提供的，不仅仅是独特的知识、方法和观察视角，也有一种动力。</p>
<p>然而，为什么Paul这种质量与数量齐飞的情况并不多见呢？</p>
<p>从他的讲述中，我悟出了关键点——扎实的基本功。他的博士做了很长的时间，在这么长的博士基本功训练里，他什么研究方法都要认真掌握，然后反复磨练。他能处理一个大领域中不同的科研问题，所以合作的界面非常好，沟通带宽足够高。</p>
<p>对于自己的这种能力，他用了“幸运”一词，但是我相信用他的“努力”一词会更好些。</p>
<p>当他足够优秀，功成名就之时，马太效应会吸引更多优秀的人愿意跟他合作。于是他的声望就达成了一种正反馈循环。这一部分你们要想得到，还需要足够长的时间积累。但是在学期间扎实学些东西，还是很必要的。</p>
<p>从Paul这里我领悟到了许多。然而，因为时间关系，他虽然把一条清晰的脉络展现在了听众的面前，却没有着重去讲他选题的另外一个重要成功心法。幸好，来自佐治亚理工的吴老师给我们补上了这一课。</p>
<h1 id="系统导向"><a href="#系统导向" class="headerlink" title="系统导向"></a>系统导向</h1><p>吴教授的问答时间里，我说了一句实话——“您讲之前我都困了，您讲完我都不困了！”</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1DyIUf14536Fdx-UqsNm-large.jpeg" alt=""></p>
<p>本来嘛，大热天的，一上午听课后，中午刚吃过午饭，1点钟就上课，一直到下午4点，中间只休息一次。下午能不困吗？</p>
<p>但是吴老师却有办法把大家弄得特别精神。因为他非常幽默。</p>
<p>吴老师的讲座里面有两条主线：</p>
<ol>
<li>批评自己的研究生。说因为他跟自己的研究生们讲话没人听，所以跑到世界各地给别人讲，别人听了获得了成功，就可以拿过来当榜样教育自己的学生；</li>
<li>夸自己的儿子。吴老师的儿子非常优秀，被藤校提前录取。介绍完儿子的成长经历后，课后问答时间许多老师跑上去问育儿经。搞得吴老师只好推说孩子平时都是太太管教。</li>
</ol>
<p>但是，他讲自己儿子的故事，却他自己和观众都带来了启发。</p>
<p>将近10年前，他儿子还很小的时候。爷俩喜欢下国际象棋。</p>
<p>吴老师下棋时似乎没有什么风度。最大的乐趣就是一个个吃儿子手里的车马小卒，看着儿子干着急，他乐不可支。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1DysxD11Ioao5W-oMnPG-large.png" alt=""></p>
<p>但是，那一次。儿子的举动让他惊呆了。</p>
<p>他依然欢乐地吃儿子手里的棋子。儿子却突然抬头，自信地告诉他“爸爸你输了”。</p>
<p>他吓了一跳，旋即觉得是小孩子的臆想。自己这边兵力充足，子数占优啊。</p>
<p>但是这盘棋的结果，却真的是儿子赢了。</p>
<p>吴老师不解，问儿子凭什么做出的判断？</p>
<p>他儿子说，因为自己的布局已经完成了。虽然损失了一些棋子，但是这个局已经锁定了最终的胜负。</p>
<p>吴老师当时立即悟出了后面几年的科研路径——要布局。</p>
<p>吴老师追求的布局结果，早几年想明白道理的Paul已经做到了。</p>
<p>在一个领域的每一个方向上，都占领关键点。这要求你对于该领域有全面深刻的了解，并且能够预测之后一段时间可能的发展。当你占领了这些战略要冲之后，别的学者的任何研究突破，都必须以你这些关键点作为基石。那么被引率想不高都难啊。</p>
<p>清华大学的宁向东教授就一直在强调“格局”二字。在他看来，“格”是个动词，“局”是名词，作为宾语。</p>
<p>一个领导者所做的，应该是具备“格局”的能力和智慧，才能充分地调动各种资源为自己所用。</p>
<p>而Paul也强调了这个问题，说一个学者，应该具有”entrepreneurship”。也就是说，好的学者也该是好的领导型管理人才。</p>
<p>对于关键点的占领，有趣的例子是科斯的论文。当年科斯提出著名的“科斯定律”那篇论文，因为过于突破传统认知，导致经济学界骂声不绝。但只要打算骂他，就得引用他那篇文章，几十年间他的文章被引用的次数过于惊人。然后科斯就拿到了诺贝尔经济学奖。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/1Dyswe11Ioao5V-yK25d-large.jpeg" alt=""></p>
<p>看到这里，你是否已经做好写篇文章，被别人痛批40年的准备了？</p>
<h1 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h1><p>本文我们总共列举了六种科研选题的导向。其中方法导向你应该避免使用，而其他的五种导向都可以借鉴。</p>
<p>复习一下，它们分别来自于：</p>
<ol>
<li>文献；</li>
<li>数据；</li>
<li>实践；</li>
<li>协同；</li>
<li>系统。</li>
</ol>
<p>要注意它们独特的应用场景，以及和你的现状相结合。</p>
<p>希望这些介绍，对于你的论文选题有所帮助。</p>
<p>但是，即便你用这些套路找到了合适的选题，却也不是完事大吉。</p>
<p>你如何知道你选的题目适合你去做呢？你如何确定你的题目有意义、有价值呢？你的假设如何用最低成本，最高效率来验证呢？</p>
<p>一篇文章，不可能涵盖所有的问题。从专家那里获得的答案和自己的一些思索，我会在后续文章中渐次展开，跟你讨论。</p>
<p>祝夏安！</p>
<h1 id="讨论"><a href="#讨论" class="headerlink" title="讨论"></a>讨论</h1><p>除了本文中列出的六种导向，你还知道哪些做科研选题的方略？这些方法你实际使用过吗？有什么值得借鉴的经验，或者应当吸取的教训呢？欢迎留言分享给大家，我们一起交流讨论。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/09/如何用Python做中文分词？/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王树义">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oejqwrqkh.bkt.clouddn.com/temp_atom-c5fd7e52.JPG.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉树芝兰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/09/如何用Python做中文分词？/" itemprop="url">如何用Python做中文分词？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-09T11:47:41+08:00">
                2017-06-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>打算绘制中文词云图？那你得先学会如何做中文文本分词。跟着我们的教程，一步步用Python来动手实践吧。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-a645744bd7c669fc?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>在《<a href="http://www.jianshu.com/p/e4b24a734ccc" target="_blank" rel="external">如何用Python做词云</a>》一文中，我们介绍了英文文本的词云制作方法。大家玩儿得可还高兴？</p>
<p>文中提过，选择英文文本作为示例，是因为处理起来最简单。但是很快就有读者尝试用中文文本做词云了。按照前文的方法，你成功了吗？</p>
<p>估计是不成功的。因为这里面缺了一个重要的步骤。</p>
<p>观察你的英文文本。你会发现英文单词之间采用空格作为强制分隔符。</p>
<p>例如：</p>
<blockquote>
<p>Yes Minister is a satirical British sitcom written by Sir Antony Jay and Jonathan Lynn that was first transmitted by BBC Television between 1980 and 1984, split over three seven-episode series.</p>
</blockquote>
<p>但是，中文的文本就没有这种空格区隔了。为了做词云，我们首先需要知道中文文本里面都有哪些“词”。</p>
<p>你可能觉得这根本不是问题——我一眼就能看出词和词之间的边界！</p>
<p>对，你当然可以。你可以人工处理1句、100句，甚至是10000句话。但是如果给你100万句话呢？</p>
<p>这就是人工处理和电脑自动化处理的最显著区别——规模。</p>
<p>别那么急着放弃啊，你可以用电脑来帮忙。</p>
<p>你的问题应该是：如何用电脑把中文文本正确拆分为一个个的单词呢？</p>
<p>这种工作，专业术语叫做分词。</p>
<p>在介绍分词工具及其安装之前，请确认你已经阅读过《<a href="http://www.jianshu.com/p/e4b24a734ccc" target="_blank" rel="external">如何用Python做词云</a>》一文，并且按照其中的步骤做了相关的准备工作，然后再继续依照本文的介绍一步步实践。</p>
<h1 id="分词"><a href="#分词" class="headerlink" title="分词"></a>分词</h1><p>中文分词的工具有很多种。有的免费，有的收费。有的在你的笔记本电脑里就能安装使用，有的却需要联网做云计算。</p>
<p>今天给大家介绍的，是如何利用Python，在你的笔记本电脑上，免费做中文分词。</p>
<p>我们采用的工具，名称很有特点，叫做“ <a href="https://github.com/fxsjy/jieba" target="_blank" rel="external">结巴分词</a> ”。</p>
<p>为什么叫这么奇怪的名字？</p>
<p>读完本文，你自己应该就能想明白了。</p>
<p>我们先来安装这款分词工具。回到你的“终端”或者“命令提示符”下。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-c892d9c9a1f4c48c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>进入你之前建立好的demo文件夹。</p>
<p>输入以下命令：</p>
<pre><code>pip install jieba
</code></pre><p>好了，现在你电脑里的Python已经知道该如何给中文分词了。</p>
<h1 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h1><p>在《<a href="http://www.jianshu.com/p/e4b24a734ccc" target="_blank" rel="external">如何用Python做词云</a>》一文中，我们使用了英剧”Yes, minister“的维基百科介绍文本。这次我们又从维基百科上找到了这部英剧对应的中文页面。翻译名称叫做《是，大臣》。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-86826fac32d7b22f.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>将网页正文拷贝下来之后，存入文本文件yes-minister-cn.txt，并且将这个文件移动到我们的工作目录demo下面。</p>
<p>好了，我们有了用于分析的中文文本数据了。</p>
<p>先别忙着编程序。正式输入代码之前，我们还需要做一件事情，就是下载一份中文字体文件。</p>
<p>请到 <a href="https://s3-us-west-2.amazonaws.com/notion-static/b869cb0c7f4e4c909a069eaebbd2b7ad/simsun.ttf" target="_blank" rel="external">这个网址</a> 下载simsun.ttf。</p>
<p>下载后，将这个ttf字体文件也移动到demo目录下，跟文本文件放在一起。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><p>在命令行下，执行：</p>
<pre><code>jupyter notebook
</code></pre><p>浏览器会自动开启，并且显示如下界面。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-3e8c237c162a0c3b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>这里还有上一次词云制作时咱们的劳动成果。此时目录下多了一个文本文件，是”Yes, Minister”的中文介绍信息。</p>
<p>打开这个文件，浏览一下内容。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-8970161a6b032583.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>我们确认中文文本内容已经正确存储。</p>
<p>回到Jupyter笔记本的主页面。点击New按钮，新建一个笔记本(Notebook)。在Notebooks里面，请选择Python 2选项。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-7d4e976011fd89cb.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>系统会提示我们输入Notebook的名称。为了和上次的英文词云制作笔记本区别，就叫它wordcloud-cn好了。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-186938cdd5fccc95.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>我们在网页里唯一的代码文本框里，输入以下3条语句。输入后，按Shift+Enter键执行。</p>
<pre><code>filename = &quot;yes-minister-cn.txt&quot;
with open(filename) as f:
 mytext = f.read()
</code></pre><p>然后我们尝试显示mytext的内容。输入以下语句之后，还是得按Shift+Enter键执行。</p>
<pre><code>print(mytext)
</code></pre><p>显示的结果如下图所示。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-327c7486e42e8630.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>既然中文文本内容读取没有问题，我们就开始分词吧。输入以下两行语句：</p>
<pre><code>import jieba
mytext = &quot; &quot;.join(jieba.cut(mytext))
</code></pre><p>系统会提示一些信息，那是结巴分词第一次启用的时候需要做的准备工作。忽略就可以了。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-e222c3190027dcf5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>分词的结果如何？我们来看看。输入：</p>
<pre><code>print(mytext)
</code></pre><p>你就可以看到下图所示的分词结果了。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-4ff5ee35e72f6834.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>单词之间已经不再紧紧相连，而是用空格做了区隔，就如同英文单词间的自然划分一样。</p>
<p>你是不是迫不及待要用分词后的中文文本作词云了？</p>
<p>可以，输入以下语句：</p>
<pre><code>from wordcloud import WordCloud
wordcloud = WordCloud().generate(mytext)
%pylab inline
import matplotlib.pyplot as plt
plt.imshow(wordcloud, interpolation=&apos;bilinear&apos;)
plt.axis(&quot;off&quot;
</code></pre><p>激动地期待着中文词云的出现？</p>
<p>可惜，你看到的词云是这个样子的。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-e25275c4b244baba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>你是不是非常愤怒，觉得这次又掉坑里了？</p>
<p>别着急，出现这样的结果，并不是分词或者词云绘制工具有问题，更不是因为咱们的教程步骤有误，只是因为字体缺失。词云绘制工具wordcloud默认使用的字体是英文的，不包含中文编码，所以才会方框一片。解决的办法，就是把你之前下载的simsun.ttf，作为指定输出字体。</p>
<p>输入以下语句：</p>
<pre><code>from wordcloud import WordCloud
wordcloud = WordCloud(font_path=&quot;simsun.ttf&quot;).generate(mytext)
%pylab inline
import matplotlib.pyplot as plt
plt.imshow(wordcloud, interpolation=&apos;bilinear&apos;)
plt.axis(&quot;off&quot;)
</code></pre><p>这次你看到的输出图形就变成了这个样子：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-e48acc2dc20d6495.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>这样一来，我们就通过中文词云的制作过程，体会到了中文分词的必要性了。</p>
<p>这里给你留个思考题，对比一下此次生成的中文词云，和上次做出的英文词云：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/64542-487a6d2016e6bf55.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>这两个词云对应的文本都来自维基百科，描述的是同样一部剧，它们有什么异同？从这种对比中，你可以发现维基百科中英文介绍内容之间，有哪些有趣的规律？</p>
<h1 id="讨论"><a href="#讨论" class="headerlink" title="讨论"></a>讨论</h1><p>掌握了本方法后，你自己做出了一张什么样的中文词云图？除了做词云以外，你还知道中文分词的哪些其他应用场景？欢迎留言，分享给大家。我们共同交流讨论。</p>
<p>如果你对我的文章感兴趣，欢迎点赞，并且微信关注和置顶我的公众号“玉树芝兰”(nkwangshuyi)。</p>
<p>如果本文可能对你身边的亲友有帮助，也欢迎你把本文通过微博或朋友圈分享给他们。让他们一起参与到我们的讨论中来。</p>
<h1 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h1><ul>
<li><a href="http://www.jianshu.com/p/e4b24a734ccc" target="_blank" rel="external">如何用Python做词云？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/d50a14541d01" target="_blank" rel="external">如何用Python做情感分析？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/4ea083874df4" target="_blank" rel="external">如何用Python做舆情时间序列可视化？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/67a71e366516" target="_blank" rel="external">贷还是不贷：如何用Python和机器学习帮你决策？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/fdde9fc03f94" target="_blank" rel="external">如何用Python从海量文本抽取主题？ - 简书</a></li>
</ul>
<h1 id="作者信息"><a href="#作者信息" class="headerlink" title="作者信息"></a>作者信息</h1><p>王树义，大学教师，终身学习者。稍微懂一点儿写作、演讲、Python和机器学习。欢迎微信关注并置顶我的公众号“玉树芝兰”(nkwangshuyi)。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/01/如何用Python做词云？/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="王树义">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://oejqwrqkh.bkt.clouddn.com/temp_atom-c5fd7e52.JPG.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="玉树芝兰">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/01/如何用Python做词云？/" itemprop="url">如何用Python做词云？</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-01T11:24:37+08:00">
                2017-06-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>临渊羡鱼，不如退而结网。我们步步为营，从头开始帮助你用Python做出第一张词云图来。欢迎尝试哦！</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-8c92c9c3b5c09561.jpg" alt=""></p>
<h1 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h1><p>在大数据时代，你经常可以在媒体或者网站上看到一些非常漂亮的信息图。</p>
<p>例如这个样子。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-04049f9471322a43.jpg" alt=""></p>
<p>或是这个样子的。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-59cf2c6c04d97cfc.jpg" alt=""></p>
<p>看过之后你有什么感觉？想不想自己做一张出来？</p>
<p>如果你的答案是肯定的，我们就不要拖延了，今天就来一步步从零开始做个词云分析图。当然，做为基础的词云图，肯定比不上刚才那两张信息图酷炫。不过不要紧，好的开始是成功的一半嘛。食髓知味，后面你就可以自己升级技能，进入你开挂的成功之路。</p>
<p>网上教你做信息图的教程很多。许多都是利用了专用工具。这些工具好是好，便捷而强大。只是它们功能都太过专一，适用范围有限。今天我们要尝试的，是用通用的编程语言Python来做词云。</p>
<p>Python是一种时下很流行的编程语言。你不仅可以用它做数据分析和可视化，还能用来做网站、爬取数据、做数学题、写脚本替你偷懒……</p>
<p>知道豆瓣吗？它一开始就是用Python写的。</p>
<p>在目前的编程语言热度排序里，Python屈居第四（当然，很多人不同意，所以编程语言的排行榜有许多，你懂的）。但看问题要用发展眼光。随着数据科学的发展，Python有爆发的趋势。早点儿站上风口，很有益处。</p>
<p>如果你之前没有编程基础，没关系。从零开始，意味着我会教你如何安装Python运行环境，一步步完成词云图。希望你不要限于浏览，而是亲自动手尝试一番。到完成的那一步，你不仅可以做出第一张词云图，而且这还将是你的第一个有用的编程作品。</p>
<p>心动了？那咱们就开始吧。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>首先，我们需要安装Python运行环境。</p>
<p>如果你用的是macOS，那么你的系统里面实际已经预装好了Python。</p>
<p>然而我们要使用到许多扩展包的功能。因此最好安装一个Python工具套装。只需要一次安装，以后大部分的功能就都已集成了。不必每次使用新功能，都去零敲碎打地安装新包了。</p>
<p>Python的套装有许多种，这里推荐给大家anaconda。因为经过我4年多的尝试与对比，感觉这款软件包的安装更为便捷，扩展包的涵盖范围与结构更合理。</p>
<p>请你到 <a href="https://www.continuum.io/downloads" target="_blank" rel="external">这个网址</a> 下载anaconda套装。下拉网页找到下载位置。根据你的操作系统类型选择合适的版本。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-24d1ceeca6147ab6.jpg" alt=""></p>
<p>因为我的系统是macOS，所以网站直接给我推荐的就是macOS系统版本。但如果你用的是Windows或Linux，请切换到相应的标签页上面。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-b3a113634bdc5874.jpg" alt=""></p>
<p>不管你用的是哪个操作系统，请注意右侧的两个按钮，分别对应Python 2.X和3.X版本。有人一定很纳闷，既然有新的版本，我凭什么用旧的？</p>
<p>不是这样的。到2020年之前，Python的两个版本会一直并存。Python的开发者确实希望大家升级切换到3.X版本。可惜目前3.X版本兼容的扩展包数量比2.X版本要少，尤其是涉及到数据科学类的软件包，就尤其明显。所以如果你是初学者，我建议你下载2.X（目前是2.7)版本，这样在以后的使用中，可能遇到的问题会少一些。等你运用熟练了，再迁移到3.X版本不迟。相信我，到那时你会很快适应新版本的。</p>
<p>下载后，执行安装文件就行了。</p>
<p>根据你的电脑运行速度不同，安装的时间长短不等。耐心点儿，只需要等这一次嘛。</p>
<p>安装完毕之后，请你安装一个“现代化”浏览器。如果你用的是macOS，那么系统自带的Safari就挺好。其他的选择包括Firefox和Google Chrome。</p>
<p>请安装上述浏览器之一，然后将其设置为系统默认的浏览器。</p>
<p>好了，下面请进入命令行模式。</p>
<p>在macOS和Linux下，你需要开启一个终端(terminal)。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-af606b75270fd052.jpg" alt=""></p>
<p>如果是Windows，请打开“开始”-“附件”-“命令提示符”。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-2f7d062533d00741.png" alt=""></p>
<p>键入以下命令：</p>
<pre><code>mkdir demo
cd demo
</code></pre><p>好了，你现在有一个专用的目录，叫做demo了。请到macOS的Finder或者Windows的“我的电脑”里面，找到这个目录并且打开它。</p>
<p>回到终端下面，macOS或者Linux用户请键入以下命令：</p>
<pre><code>pip install wordcloud
</code></pre><p>macOS会提示你先安装XCode命令行工具，你按照默认设置一步步进行就可以了。但是请注意，务必在WiFi环境下安装。如果你用的是4G流量，那你可要破费一笔了。</p>
<p>如果你用的是Windows，那么为了使用这个词云包，就稍微麻烦一些，你需要到 <a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#wordcloud" target="_blank" rel="external">这里</a> 下载 wordcloud‑1.3.1‑cp27‑cp27m‑win32.whl 这个文件。下载后将它拖拽到你的demo目录里。</p>
<p>在命令行下，先执行：</p>
<pre><code>pip install wheel
</code></pre><p>然后，再执行：</p>
<pre><code>pip install wordcloud‑1.3.1‑cp27‑cp27m‑win32.whl
</code></pre><p>好了，我们需要的全部Python运行环境终于装好了。</p>
<p>请务必按照上述步骤执行，确保每一步都已经顺利完成。否则一旦遗漏，后面运行程序会报错。</p>
<h1 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h1><p>词云分析的对象，是文本。</p>
<p>理论上讲，文本可以是各种语言的。英文、中文、法文、阿拉伯文……</p>
<p>为了简便，我们这里以英文文本为例。你可以随意到网上找一篇英文文章作为分析对象。我特别喜欢英剧”Yes, minister”，所以到维基百科上找到了这部剧的介绍词条。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-0d5de443d1f1279b.jpg" alt=""></p>
<p>我把其中的正文文字部分拷贝了下来，存储为一个文本文件，叫做yes-minister.txt。</p>
<p>把这个文件挪动到我们的工作目录demo里。</p>
<p>好了，文本数据已经准备好了。开始进入编程的魔幻世界吧！</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><p>在命令行下，执行：</p>
<pre><code>jupyter notebook
</code></pre><p>浏览器会自动开启，并且显示如下界面。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-56dc538ceab804a1.jpg" alt=""></p>
<p>这就是咱们刚才的劳动成果——安装好的运行环境了。我们还没有编写程序，目录下只有一个刚才生成的文本文件。</p>
<p>打开这个文件，浏览一下内容。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-0cf86a03c446fc0c.jpg" alt=""></p>
<p>回到Jupyter笔记本的主页面。我们点击New按钮，新建一个笔记本(Notebook)。在Notebooks里面，请选择Python 2选项。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-6a658c6964ea6292.jpg" alt=""></p>
<p>系统会提示我们输入Notebook的名称。程序代码文件的名称，你可以随便起。但是我建议你起一个有意义的名字，将来好方便查找。由于我们要尝试词云，就叫它wordcloud好了。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-b4cea19bcf9bd026.jpg" alt=""></p>
<p>然后就出现了一个空白的笔记本，供我们使用了。我们在网页里唯一的代码文本框里，输入以下3条语句。请务必逐字根据示例代码输入，空格数量都不可以有差别。尤其注意第三行，用4个空格，或者1个Tab开始。输入后，按Shift+Enter键，就可以执行了。</p>
<pre><code>filename = &quot;yes-minister.txt&quot;
with open(filename) as f:
 mytext = f.read()
</code></pre><p>没有任何结果啊。</p>
<p>对，因为我们这里没有任何输出动作，程序只是打开了你的yes-minister.txt文本文件，把里面的内容都读了出来，存储到了一个叫做mytext的变量里面。</p>
<p>然后我们尝试显示mytext的内容。输入以下语句之后，还是得按Shift+Enter键，系统才会实际执行该语句。</p>
<pre><code>mytext
</code></pre><p>之后的步骤里，也千万不要忘了这一确认执行动作。</p>
<p>显示的结果如下图所示。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-e2c51352c1ac9899.jpg" alt=""></p>
<p>嗯，看来mytext变量里存储的文本就是我们从网上摘来的文字。到目前为止，一切正常。</p>
<p>然后我们呼唤(import)词云包，利用mytext中存储的文本内容来制造词云。</p>
<pre><code>from wordcloud import WordCloud
wordcloud = WordCloud().generate(mytext)
</code></pre><p>这时程序可能会报警。别担心。警告(warning)不影响程序的正常运行。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-f84986a50221711e.jpg" alt=""></p>
<p>此时词云分析已经完成了。你没看错，制作词云的核心步骤只需要这2行语句，而且第一条还只是从扩展包里找外援。但是程序并不会给我们显示任何东西。</p>
<p>说好了的词云呢？折腾了这么半天，却啥也没有，你蒙人吗？！</p>
<p>别激动。输入下面4行语句后，就是见证奇迹发生的时刻了。</p>
<pre><code>%pylab inline
import matplotlib.pyplot as plt
plt.imshow(wordcloud, interpolation=&apos;bilinear&apos;)
plt.axis(&quot;off&quot;)
</code></pre><p>运行结果如图所示：</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-e61d788cd0c46ac3.jpg" alt=""></p>
<p>不用那么兴奋嘛。</p>
<p>你可以在词云图片上单机鼠标右键，用“图片另存为”功能导出。</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-3a90b4476f094bf1.png" alt=""></p>
<p>通过这张词云图，我们可以看到不同单词和词组出现的频率高低差别。高频词的字体明显更大，而且颜色也很醒目。值得说明的是，最显眼的单词Hacker并不是指黑客，而是指这部剧的主角之一——哈克首相。</p>
<p>包含程序完整代码的ipynb文件，我也分享了出来，你可以从 <a href="https://s3-us-west-2.amazonaws.com/notion-static/0067946616b34e2885636816b1cb1a6a/wordcloud.ipynb" target="_blank" rel="external">这里</a> 下载。</p>
<p>希望你在尝试过程中一切顺利。对自己生成的词云图满意吗？如果你不满意，也不要紧，可以挖掘wordcloud软件包的其他高级功能。尝试一下，看自己能不能做出这样的词云图来？</p>
<p><img src="http://oejqwrqkh.bkt.clouddn.com/64542-be1f21209142a4c8.jpg" alt=""></p>
<h1 id="讨论"><a href="#讨论" class="headerlink" title="讨论"></a>讨论</h1><p>学完了本方法后，你做出了一张什么样的词云图？除了本文介绍的方法以外，你还知道哪些便捷地制作词云或其他信息图的方式？欢迎留言，分享给大家。我们共同交流讨论。</p>
<p>如果你对我的文章感兴趣，欢迎点赞，并且微信关注和置顶我的公众号“玉树芝兰”(nkwangshuyi)。</p>
<p>如果本文可能对你身边的亲友有帮助，也欢迎你把本文通过微博或朋友圈分享给他们。让他们一起参与到我们的讨论中来。</p>
<h1 id="延伸阅读"><a href="#延伸阅读" class="headerlink" title="延伸阅读"></a>延伸阅读</h1><ul>
<li><a href="http://www.jianshu.com/p/721190534061" target="_blank" rel="external">如何用Python做中文分词？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/d50a14541d01" target="_blank" rel="external">如何用Python做情感分析？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/4ea083874df4" target="_blank" rel="external">如何用Python做舆情时间序列可视化？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/67a71e366516" target="_blank" rel="external">贷还是不贷：如何用Python和机器学习帮你决策？ - 简书</a></li>
<li><a href="http://www.jianshu.com/p/fdde9fc03f94" target="_blank" rel="external">如何用Python从海量文本抽取主题？ - 简书</a></li>
</ul>
<h1 id="作者信息"><a href="#作者信息" class="headerlink" title="作者信息"></a>作者信息</h1><p>王树义，大学教师，终身学习者。稍微懂一点儿写作、演讲、Python和机器学习。欢迎微信关注并置顶我的公众号“玉树芝兰”(nkwangshuyi)。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="http://oejqwrqkh.bkt.clouddn.com/temp_atom-c5fd7e52.JPG.jpg"
              alt="王树义" />
          
            <p class="site-author-name" itemprop="name">王树义</p>
            <p class="site-description motion-element" itemprop="description"></p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives">
            
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">王树义</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.2</div>


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
